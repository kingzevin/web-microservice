/*! For license information please see main-b9abd55fc32032a0cedf.js.LICENSE */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.main=t():(e.Frontend=e.Frontend||{},e.Frontend.main=t())}(window,(function(){return function(e){function t(t){for(var r,i,c=t[0],s=t[1],u=t[2],d=0,p=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(l&&l(t);p.length;)p.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={4:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;return a.push([120,0]),n()}([function(e,t,n){var r,o;function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){return null!=e?t(e):void 0}n.p=window.baseAssetPath,r=[n(21),n(45),n(46),n(23),n(47),n(48)],void 0===(o=function(){var e=angular.module("SharelatexApp",["ui.bootstrap","autocomplete","RecursionHelper","ng-context-menu","underscore","ngSanitize","ipCookie","ErrorCatcher","localStorage","sessionStorage","ngTagsInput","ui.select"]).config(["$qProvider","$httpProvider","uiSelectConfig",function(e,t,n){return e.errorOnUnhandledRejections(!1),n.spinnerClass="fa fa-refresh ui-select-spin",i("undefined"!=typeof MathJax&&null!==MathJax?MathJax.Hub:void 0,(function(e){return e.Config({messageStyle:"none",imageFont:null,"HTML-CSS":{availableFonts:["TeX"],scale:110,matchFontHeight:!1},TeX:{equationNumbers:{autoNumber:"AMS"},useLabelIDs:!1},skipStartupTypeset:!0,tex2jax:{processEscapes:!0,inlineMath:[["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]]}})}))}]);e.run(["$templateCache",function(e){return e.put("bootstrap/match.tpl.html",'<div class="ui-select-match" ng-hide="$select.open && $select.searchEnabled" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex="-1" class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span> <i class="caret pull-right" ng-click="$select.toggle($event)"></i> <a ng-show="$select.allowClear && !$select.isEmpty() && ($select.disabled !== true)" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn btn-xs btn-link pull-right"><i class="fa fa-times" aria-hidden="true"></i></a></span></div>')}]);var t=null!=i(null!=window.location?window.location.search:void 0,(function(e){return e.match(/debug=true/)})),n=null;return window.sl_debugging=t,window.sl_console={log:function(){if(t){var e;n=null;for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=console).log.apply(e,a(Array.from(o||[])))}},logOnce:function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var i;if(t&&r[0]!==n)return n=r[0],(i=console).log.apply(i,a(Array.from(r||[])))}},e}.apply(t,r))||(e.exports=o)},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},,,,function(e,t,n){var r,o;function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}r=[n(15)],void 0===(o=function(e){return{getColorScheme:function(e,t){return this.isDarkTheme(t)?{cursor:"hsl(".concat(e,", 70%, 50%)"),labelBackgroundColor:"hsl(".concat(e,", 70%, 50%)"),highlightBackgroundColor:"hsl(".concat(e,", 100%, 28%);"),strikeThroughBackgroundColor:"hsl(".concat(e,", 100%, 20%);"),strikeThroughForegroundColor:"hsl(".concat(e,", 100%, 60%);")}:{cursor:"hsl(".concat(e,", 70%, 50%)"),labelBackgroundColor:"hsl(".concat(e,", 70%, 50%)"),highlightBackgroundColor:"hsl(".concat(e,", 70%, 85%);"),strikeThroughBackgroundColor:"hsl(".concat(e,", 70%, 95%);"),strikeThroughForegroundColor:"hsl(".concat(e,", 70%, 40%);")}},isDarkTheme:function(e){var t=e.find(".ace_editor").css("background-color"),n=a(Array.from(t.match(/rgb\(([0-9]+), ([0-9]+), ([0-9]+)\)/)),4),r=(n[0],n[1]),o=n[2],i=n[3];return(r=parseInt(r,10))+(o=parseInt(o,10))+(i=parseInt(i,10))<384},OWN_HUE:200,ANONYMOUS_HUE:100,getHueForUserId:function(e){return null==e||"anonymous-user"===e?this.ANONYMOUS_HUE:window.user.id===e?this.OWN_HUE:(hue=this.getHueForId(e),hue>this.OWNER_HUE-20&&(hue+=40),hue)},getHueForTagId:function(e){return this.getHueForId(e)},getHueForId:function(t){var n=e(t);return parseInt(n.toString().slice(0,8),16)%320}}}.apply(t,r))||(e.exports=o)},,,,function(e,t){e.exports=function(e){return JSON.parse(JSON.stringify(e))}},,,,,,,,function(e,t,n){"use strict";var r=n(24);function o(e,t){var r=n(18),o=this;"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):o.stack=(new Error).stack||"Cannot get a stacktrace, browser is too old",this.name="AlgoliaSearchError",this.message=e||"Unknown error",t&&r(t,(function(e,t){o[t]=e}))}function a(e,t){function n(){var n=Array.prototype.slice.call(arguments,0);"string"!=typeof n[0]&&n.unshift(t),o.apply(this,n),this.name="AlgoliaSearch"+e+"Error"}return r(n,o),n}r(o,Error),e.exports={AlgoliaSearchError:o,UnparsableJSON:a("UnparsableJSON","Could not parse the incoming response as JSON, see err.more for details"),RequestTimeout:a("RequestTimeout","Request timed out before getting a response"),Network:a("Network","Network issue, see err.more for details"),JSONPScriptFail:a("JSONPScriptFail","<script> was loaded but did not call our provided callback"),ValidUntilNotFound:a("ValidUntilNotFound","The SecuredAPIKey does not have a validUntil parameter."),JSONPScriptError:a("JSONPScriptError","<script> unable to load due to an `error` event on it"),ObjectNotFound:a("ObjectNotFound","Object not found"),Unknown:a("Unknown","Unknown error occured")}},function(e,t){var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString;e.exports=function(e,t,o){if("[object Function]"!==r.call(t))throw new TypeError("iterator must be a function");var a=e.length;if(a===+a)for(var i=0;i<a;i++)t.call(o,e[i],i,e);else for(var c in e)n.call(e,c)&&t.call(o,e[c],c,e)}},function(e,t,n){var r=n(18);e.exports=function(e,t){var n=[];return r(e,(function(r,o){n.push(t(r,o,e))})),n}},,function(e,t,n){var r,o;r=[n(65),n(86),n(90),n(91),n(92),n(93),n(94),n(95),n(96),n(97),n(98),n(99),n(29),n(100),n(101)],void 0===(o=function(){}.apply(t,r))||(e.exports=o)},,function(e,t){angular.module("localStorage",[]).value("localStorage",(function(){try{var e;return(e=$).localStorage.apply(e,arguments)}catch(e){return console.error("localStorage exception",e),null}}))},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},,,,,,function(e,t,n){var r,o;function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r=[n(0)],void 0===(o=function(e){return e.factory("queuedHttp",["$http","$q",function(e,t){var n=[],r=!1,o=function e(){if(!r){var t=n.shift();return null!=t?(r=!0,t().then((function(){return r=!1,e()})).catch((function(){return r=!1,e()}))):void 0}},i=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var c={},s=[],u=[];c.then=function(e,t){return s.push(e),null!=t&&u.push(t),c},c.catch=function(e){return u.push(e),c};var l=function(){return e.apply(void 0,a(Array.from(r||[]))).then((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.from(s).map((function(e){return e.apply(void 0,a(Array.from(t||[])))}))})).catch((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.from(u).map((function(e){return e.apply(void 0,a(Array.from(t||[])))}))}))};return n.push(l),o(),c};return i.post=function(e,t){return i({method:"POST",url:e,data:t})},i}])}.apply(t,r))||(e.exports=o)},function(e,t,n){(function(r){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(196)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(a=o))})),e.splice(a,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,n(25))},,,,,,,,,,,,,,function(e,t){angular.module("RecursionHelper",[]).factory("RecursionHelper",["$compile",function(e){return{compile:function(t,n){angular.isFunction(n)&&(n={post:n});var r,o=t.contents().remove();return{pre:n&&n.pre?n.pre:null,post:function(t,a){r||(r=e(o)),r(t,(function(e){a.append(e)})),n&&n.post&&n.post.apply(null,arguments)}}}}}])},function(e,t){var n=angular.module("ErrorCatcher",[]);n.config(["$provide",function(e){return e.decorator("$exceptionHandler",["$log","$delegate",function(e,t){return function(e,n){if("Possibly unhandled rejection: canceled"!==e||void 0!==n)return null!=("undefined"!=typeof Raven&&null!==Raven?Raven.captureException:void 0)&&Raven.captureException(e),t(e,n)}}])}]),n.factory("unAuthHttpResponseInterceptor",["$q","$location",function(e,t){return{responseError:function(t){return[401,403].includes(t.status)&&!(null!=t.config?t.config.disableAutoLoginRedirect:void 0)&&(window.location.pathname.match(/^\/project/)?window.location="/login?redir=".concat(encodeURI(window.location.pathname)):window.location="/login"),e.reject(t)}}}]),n.config(["$httpProvider",function(e){return e.interceptors.push("unAuthHttpResponseInterceptor")}])},function(e,t){angular.module("sessionStorage",[]).value("sessionStorage",(function(){try{var e;return(e=$).sessionStorage.apply(e,arguments)}catch(e){return console.error("sessionStorage exception",e),null}}))},function(e,t,n){var r,o;r=[n(21)],void 0===(o=function(){return angular.module("underscore",[]).factory("_",(function(){return window._}))}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.controller("FreeTrialModalController",["$scope","eventTracking",function(e,t){e.buttonClass="btn-primary",e.startFreeTrial=function(n,r){var o,a="collaborator_free_trial_7_days",i=window.open();"function"==typeof ga&&ga("send","event","subscription-funnel","upgraded-free-trial",n),o="/user/subscription/new?planCode=".concat(a,"&ssp=true"),o="".concat(o,"&itm_campaign=").concat(n),r&&(o="".concat(o,"&itm_content=").concat(r)),e.startedFreeTrial=!0,t.sendMB("subscription-start-trial",{source:n,plan:a}),i.location=o}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(16),n(0),n(23)],void 0===(o=function(e,t){var n=0,r=new Date;return t.factory("eventTracking",["$http","localStorage",function(t,o){var a=function(){var e=o("mbEvents");return null==e&&o("mbEvents",e={}),e},i=function(e){return a()[e]||!1},c=function(e){var t=a();return t[e]=!0,o("mbEvents",t)};return{send:function(e,t,n,r){return ga("send","event",e,t,n,r)},sendGAOnce:function(e,t,n,r){if(!i(t))return c(t),this.send(e,t,n,r)},editingSessionHeartbeat:function(){if(r<=new Date){t({url:"/editingSession/".concat(window.project_id),method:"PUT",headers:{"X-CSRF-Token":window.csrfToken}});var o=++n<=2?30:n<=6?60*(n-2):300;return r=e().add(o,"seconds").toDate()}},sendMB:function(e,n){return null==n&&(n={}),t({url:"/event/".concat(e),method:"POST",data:n,headers:{"X-CSRF-Token":window.csrfToken}})},sendMBSampled:function(e,t){if(Math.random()<.01)return this.sendMB(e,t)},sendMBOnce:function(e,t){if(!i(e))return c(e),this.sendMB(e,t)},eventInCache:function(e){return i(e)}}}]),$(".navbar a").on("click",(function(e){var t=$(e.target).attr("href");if(null!=t)return ga("send","event","navigation","top menu bar",t)}))}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.directive("mathjax",["$compile","$parse",function(e,t){return{link:function(n,r,o){if(MathJax&&MathJax.Hub){if(!t(o.mathjaxAllowHtml)(n)){var a=r.html(),i=e("<span ng-non-bindable></span>")({});r.html("").append(i),i.html(a)}if("no-single-dollar"!==o.delimiter){var c=MathJax.Hub.config&&MathJax.Hub.config.tex2jax.inlineMath;_.find(c,(function(e){return"$"===e[0]&&"$"===e[1]}))||MathJax.Hub.Config({tex2jax:{inlineMath:c.concat([["$","$"]])}})}setTimeout((function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub,r.get(0)])}),0)}}}}])}.apply(t,r))||(e.exports=o)},function(e,t){e.exports=function(e,t){var n=!1;return function(){return n||(console.warn(t),n=!0),e.apply(this,arguments)}}},function(e,t){e.exports=function(e,t){var n=e.toLowerCase().replace(/[\.\(\)]/g,"");return"algoliasearch: `"+e+"` was replaced by `"+t+"`. Please see https://github.com/algolia/algoliasearch-client-javascript/wiki/Deprecated#"+n}},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){e.constant("ExposedSettings",window.ExposedSettings)}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(15)],void 0===(o=function(e,t){var n=["sl_abt_multi_currency_editor_eu-eu","sl_abt_multi_currency_eu-eu","sl_abt_multi_currency_editor_eu-usd","sl_abt_multi_currency_eu-usd","sl_abt_trial_len_14d","sl_abt_trial_len_7d","sl_abt_trial_len_30d","sl_utt","sl_utt_trial_len","sl_utt_multi_currency"];return e.factory("abTestManager",["$http","ipCookie",function(e,r){_.each(n,(function(e){return r.remove(e)}));var o=function(e,t){return"sl_abt_".concat(e,"_").concat(t)};return{processTestWithStep:function(e,t,n){var a,i;if(function(e,t){return(null!=e||0===t)&&(0===t||e+1===t)}((a=function(e,t){var n=o(e,t);return r(n)}(e,t),i=function(e){return e.step},null!=a?i(a):void 0),n))return function(e,t,n){var a=o(e,t);return r(a,{step:n},{expires:100,path:"/"}),ga("send","event","ab_tests","".concat(e,":").concat(t),"step-".concat(n))}(e,t,n)},getABTestBucket:function(e,n){var o,a,i,c=(a="sl_utt_".concat(o=e),null==(i=r(a))&&(i=Math.random(),r(a,i,{expires:365,path:"/"})),t("".concat(i,":").concat(o)));return n[parseInt(c.toString().slice(0,2),16)%((null!=n?n.length:void 0)||2)]}}}]),e.controller("AbTestController",["$scope","abTestManager",function(e,t){_.keys(window.ab);return _.each(window.ab,(function(e){return t.processTestWithStep(e.testName,e.bucket,e.step)}))}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.directive("stopPropagation",["$http",function(e){return{restrict:"A",link:function(e,t,n){return t.bind(n.stopPropagation,(function(e){return e.stopPropagation()}))}}}]),e.directive("preventDefault",["$http",function(e){return{restrict:"A",link:function(e,t,n){return t.bind(n.preventDefault,(function(e){return e.preventDefault()}))}}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){var t;e.directive("focusWhen",["$timeout",function(e){return{restrict:"A",link:function(t,n,r){return t.$watch(r.focusWhen,(function(t){if(t)return e((function(){return n.focus()}))}))}}}]),e.directive("focusOn",["$timeout",function(e){return{restrict:"A",link:function(e,t,n){return e.$on(n.focusOn,(function(){return t.focus()}))}}}]),e.directive("selectWhen",["$timeout",function(e){return{restrict:"A",link:function(t,n,r){return t.$watch(r.selectWhen,(function(t){if(t)return e((function(){return n.select()}))}))}}}]),e.directive("selectOn",["$timeout",function(e){return{restrict:"A",link:function(e,t,n){return e.$on(n.selectOn,(function(){return t.select()}))}}}]),e.directive("selectNameWhen",["$timeout",function(e){return{restrict:"A",link:function(n,r,o){return n.$watch(o.selectNameWhen,(function(n){if(n)return e((function(){return t(r)}))}))}}}]),e.directive("selectNameOn",(function(){return{restrict:"A",link:function(e,n,r){return e.$on(r.selectNameOn,(function(){return t(n)}))}}})),e.directive("focus",["$timeout",function(e){return{scope:{trigger:"@focus"},link:function(t,n){return t.$watch("trigger",(function(t){if("true"===t)return e((function(){return n[0].focus()}))}))}}}]),t=function(e){e.focus();var t=e.val();if(null!=e[0].setSelectionRange){var n=t.lastIndexOf(".");return-1===n&&(n=t.length),e[0].setSelectionRange(0,n)}}}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(112)],void 0===(o=function(e,t){return e.directive("fineUpload",["$timeout",function(e){return{scope:{multiple:"=",endpoint:"@",templateId:"@",sizeLimit:"@",allowedExtensions:"=",onCompleteCallback:"=",onUploadCallback:"=",onValidateBatch:"=",onErrorCallback:"=",onSubmitCallback:"=",onCancelCallback:"=",autoUpload:"=",params:"=",control:"="},link:function(e,n,r){var o,a,i=e.multiple||!1,c=e.endpoint,s=e.templateId;a=null!=e.allowedExtensions?{allowedExtensions:e.allowedExtensions}:{},e.sizeLimit&&(a.sizeLimit=e.sizeLimit);var u=e.maxConnections||1,l=e.onCompleteCallback||function(){},d=e.onUploadCallback||function(){},p=e.onErrorCallback||function(){},f=e.onValidateBatch||function(){},m=e.onSubmitCallback||function(){},h=e.onCancelCallback||function(){};o=null==e.autoUpload||e.autoUpload;var y=e.params||{};y._csrf=window.csrfToken;var g=new t.FineUploader({element:n[0],multiple:i,autoUpload:o,disabledCancelForFormUploads:!0,validation:a,maxConnections:u,request:{endpoint:c,forceMultipart:!0,params:y,paramsInBody:!1},callbacks:{onComplete:l,onUpload:d,onValidateBatch:f,onError:p,onSubmit:m,onCancel:h},template:s,failedUploadTextDisplay:{mode:"custom",responseProperty:"error"}});return window.q=g,null!=e.control&&(e.control.q=g),g}}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.directive("onEnter",(function(){return function(e,t,n){return t.bind("keydown keypress",(function(t){if(13===t.which)return e.$apply((function(){return e.$eval(n.onEnter,{event:t})})),t.preventDefault()}))}}))}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.factory("validateCaptcha",(function(){var e=[],t=function(t){for(var n=0,r=e;n<r.length;n++){(0,r[n])(t)}e=[]},n=null;return function(r,o){if(null==r&&(r=function(e){}),"undefined"==typeof grecaptcha||null===grecaptcha||o)return r();if(e.push(r),e.push((function(){return grecaptcha.reset()})),null==n){var a=$("#recaptcha")[0];n=grecaptcha.render(a,{callback:t})}return grecaptcha.execute(n)}}))}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.factory("validateCaptchaV3",(function(){var e=window.grecaptcha,t=window.ExposedSettings;return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e&&t&&t.recaptchaSiteKeyV3&&e.ready((function(){e.execute(t.recaptchaSiteKeyV3,{action:n}).then(r)}))}}))}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(16)],void 0===(o=function(e,t){t.updateLocale("en",{calendar:{lastDay:"[Yesterday]",sameDay:"[Today]",nextDay:"[Tomorrow]",lastWeek:"ddd, Do MMM YY",nextWeek:"ddd, Do MMM YY",sameElse:"ddd, Do MMM YY"}}),e.filter("formatDate",(function(){return function(e,n){return e?(null==n&&(n="Do MMM YYYY, h:mm a"),t(e).format(n)):"N/A"}})),e.filter("relativeDate",(function(){return function(e){return t(e).calendar()}})),e.filter("fromNowDate",(function(){return function(e){return t(e).fromNow()}}))}.apply(t,r))||(e.exports=o)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r,o;function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e,t){return null!=e?t(e):void 0}r=[n(0)],void 0===(o=function(e){return e.factory("ccUtils",(function(){var e=/(\d{1,4})/g,t=[{type:"visa",patterns:[4],format:e,length:[13,16],cvcLength:[3],luhn:!0},{type:"mastercard",patterns:[51,52,53,54,55,22,23,24,25,26,27],format:e,length:[16],cvcLength:[3],luhn:!0},{type:"amex",patterns:[34,37],format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"dinersclub",patterns:[30,36,38,39],format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvcLength:[3],luhn:!0},{type:"discover",patterns:[60,64,65,622],format:e,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",patterns:[62,88],format:e,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"jcb",patterns:[35],format:e,length:[16],cvcLength:[3],luhn:!0}],n=function(e){e=(e+"").replace(/\D/g,"");for(var n=0,r=Array.from(t);n<r.length;n++)for(var o=r[n],a=0,i=Array.from(o.patterns);a<i.length;a++){var c=i[a]+"";if(e.substr(0,c.length)===c)return o}};return{fromNumber:n,fromType:function(e){for(var n=0,r=Array.from(t);n<r.length;n++){var o=r[n];if(o.type===e)return o}},cardType:function(e){return e&&i(n(e),(function(e){return e.type}))||null},formatExpiry:function(e){var t=e.match(/^\D*(\d{1,2})(\D+)?(\d{1,4})?/);if(!t)return"";var n=t[1]||"",r=t[2]||"",o=t[3]||"";return o.length>0?r=" / ":" /"===r?(n=n.substring(0,1),r=""):2===n.length||r.length>0?r=" / ":1!==n.length||["0","1"].includes(n)||(n="0".concat(n),r=" / "),n+r+o},formatCardNumber:function(e){e=e.replace(/\D/g,"");var t=n(e);if(!t)return e;var r=t.length[t.length.length-1];if(e=e.slice(0,r),t.format.global)return i(e.match(t.format),(function(e){return e.join(" ")}));var o=t.format.exec(e);return null!=o?(o.shift(),(o=$.grep(o,(function(e){return e}))).join(" ")):void 0},defaultFormat:e,defaultInputFormat:/(?:^|\s)(\d{4})$/,parseExpiry:function(e){null==e&&(e="");var t=a(Array.from(e.split(/[\s\/]+/,2)),2),n=t[0],r=t[1];if(2===(null!=r?r.length:void 0)&&/^\d+$/.test(r)){var o=(new Date).getFullYear();r=(o=o.toString().slice(0,2))+r}if(n=parseInt(n,10),r=parseInt(r,10),!isNaN(n)&&!isNaN(r))return{month:n,year:r}}}})),e.factory("ccFormat",["ccUtils","$filter",function(e,t){var n=function(e){return null!=e.prop("selectionStart")&&e.prop("selectionStart")!==e.prop("selectionEnd")||!(null==i("undefined"!=typeof document&&null!==document?document.selection:void 0,(function(e){return e.createRange}))||!document.selection.createRange().text)},r=function(e,t){var n;try{n=t.prop("selectionStart")}catch(e){n=null}var r=t.val();if(t.val(e),null!==n&&t.is(":focus")){if(n===r.length&&(n=e.length),r!==e){var o=r.slice(n-1,+n+1||void 0),a=e.slice(n-1,+n+1||void 0),i=e[n];/\d/.test(i)&&o==="".concat(i," ")&&a===" ".concat(i)&&(n+=1)}return t.prop("selectionStart",n),t.prop("selectionEnd",n)}},o=function(e){null==e&&(e="");for(var t="",n=e.split(""),r=0,o=Array.from(n);r<o.length;r++){var a=o[r],i="０１２３４５６７８９".indexOf(a);i>-1&&(a="0123456789"[i]),t+=a}return t};return{hasTextSelected:n,replaceFullWidthChars:o,reFormatNumeric:function(e){var t=$(e.currentTarget);return setTimeout((function(){var e=t.val();return e=(e=o(e)).replace(/\D/g,""),r(e,t)}))},reFormatCardNumber:function(t){var n=$(t.currentTarget);return setTimeout((function(){var t=n.val();return t=o(t),t=e.formatCardNumber(t),r(t,n)}))},formatCardNumber:function(t){var n,r=String.fromCharCode(t.which);if(/^\d+$/.test(r)){var o=$(t.currentTarget),a=o.val(),i=e.fromNumber(a+r),c=(a.replace(/\D/g,"")+r).length,s=16;if(i&&(s=i.length[i.length.length-1]),!(c>=s||null!=o.prop("selectionStart")&&o.prop("selectionStart")!==a.length))return(n=i&&"amex"===i.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/).test(a)?(t.preventDefault(),setTimeout((function(){return o.val(a+" "+r)}))):n.test(a+r)?(t.preventDefault(),setTimeout((function(){return o.val(a+r+" ")}))):void 0}},formatBackCardNumber:function(e){var t=$(e.currentTarget),n=t.val();if(8===e.which&&(null==t.prop("selectionStart")||t.prop("selectionStart")===n.length))return/\d\s$/.test(n)?(e.preventDefault(),setTimeout((function(){return t.val(n.replace(/\d\s$/,""))}))):/\s\d?$/.test(n)?(e.preventDefault(),setTimeout((function(){return t.val(n.replace(/\d$/,""))}))):void 0},getFormattedCardNumber:function(t){t=t.replace(/\D/g,"");var n=e.fromNumber(t);if(!n)return t;var r=n.length[n.length.length-1];if(t=t.slice(0,r),n.format.global)return i(t.match(n.format),(function(e){return e.join(" ")}));var o=n.format.exec(t);return null!=o?(o.shift(),(o=$.grep(o,(function(e){return e}))).join(" ")):void 0},parseCardNumber:function(e){return null!=e?e.replace(/\s/g,""):e},reFormatExpiry:function(t){var n=$(t.currentTarget);return setTimeout((function(){var t=n.val();return t=o(t),t=e.formatExpiry(t),r(t,n)}))},formatExpiry:function(e){var t=String.fromCharCode(e.which);if(/^\d+$/.test(t)){var n=$(e.currentTarget),r=n.val()+t;return/^\d$/.test(r)&&!["0","1"].includes(r)?(e.preventDefault(),setTimeout((function(){return n.val("0".concat(r," / "))}))):/^\d\d$/.test(r)?(e.preventDefault(),setTimeout((function(){var e=parseInt(r[0],10),t=parseInt(r[1],10);return t>2&&0!==e?n.val("0".concat(e," / ").concat(t)):n.val("".concat(r," / "))}))):void 0}},formatForwardExpiry:function(e){var t=String.fromCharCode(e.which);if(/^\d+$/.test(t)){var n=$(e.currentTarget),r=n.val();return/^\d\d$/.test(r)?n.val("".concat(r," / ")):void 0}},formatForwardSlash:function(e){var t=String.fromCharCode(e.which);if("/"===t||" "===t){var n=$(e.currentTarget),r=n.val();return/^\d$/.test(r)&&"0"!==r?n.val("0".concat(r," / ")):void 0}},formatBackExpiry:function(e){var t=$(e.currentTarget),n=t.val();if(8===e.which&&(null==t.prop("selectionStart")||t.prop("selectionStart")===n.length))return/\d\s\/\s$/.test(n)?(e.preventDefault(),setTimeout((function(){return t.val(n.replace(/\d\s\/\s$/,""))}))):void 0},parseExpiry:function(n){if(null!=n){var r=e.parseExpiry(n);if(null==r)return;var o=new Date(r.year,r.month-1);return t("date")(o,"MM/yyyy")}},reFormatCVC:function(e){var t=$(e.currentTarget);return setTimeout((function(){var e=t.val();return e=(e=o(e)).replace(/\D/g,"").slice(0,4),r(e,t)}))},restrictNumeric:function(e){if(e.metaKey||e.ctrlKey)return!0;if(32===e.which)return!1;if(0===e.which)return!0;if(e.which<33)return!0;var t=String.fromCharCode(e.which);return!!/[\d\s]/.test(t)},restrictCardNumber:function(t){var r=$(t.currentTarget),o=String.fromCharCode(t.which);if(/^\d+$/.test(o)&&!n(r)){var a=(r.val()+o).replace(/\D/g,""),i=e.fromNumber(a);return i?a.length<=i.length[i.length.length-1]:a.length<=16}},restrictExpiry:function(e){var t=$(e.currentTarget),r=String.fromCharCode(e.which);if(/^\d+$/.test(r)&&!n(t)){var o=t.val()+r;return!((o=o.replace(/\D/g,"")).length>6)&&void 0}},restrictCVC:function(e){var t=$(e.currentTarget),r=String.fromCharCode(e.which);if(/^\d+$/.test(r)&&!n(t))return(t.val()+r).length<=4},setCardType:function(t){var n=$(t.currentTarget),r=n.val(),o=e.cardType(r)||"unknown";if(!n.hasClass(o)){var a=Array.from(cards).map((function(e){return e.type}));return n.removeClass("unknown"),n.removeClass(a.join(" ")),n.addClass(o),n.toggleClass("identified","unknown"!==o),n.trigger("payment.cardType",o)}}}}]),e.directive("ccFormatExpiry",["ccFormat",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,r,o){return n.on("keypress",e.restrictNumeric),n.on("keypress",e.restrictExpiry),n.on("keypress",e.formatExpiry),n.on("keypress",e.formatForwardSlash),n.on("keypress",e.formatForwardExpiry),n.on("keydown",e.formatBackExpiry),n.on("change",e.reFormatExpiry),n.on("input",e.reFormatExpiry),n.on("paste",e.reFormatExpiry),o.$parsers.push(e.parseExpiry),o.$formatters.push(e.parseExpiry)}}}]),e.directive("ccFormatCardNumber",["ccFormat",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,r,o){return n.on("keypress",e.restrictNumeric),n.on("keypress",e.restrictCardNumber),n.on("keypress",e.formatCardNumber),n.on("keydown",e.formatBackCardNumber),n.on("paste",e.reFormatCardNumber),o.$parsers.push(e.parseCardNumber),o.$formatters.push(e.getFormattedCardNumber)}}}]),e.directive("ccFormatSecCode",["ccFormat",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,r,o){return n.on("keypress",e.restrictNumeric),n.on("keypress",e.restrictCVC),n.on("paste",e.reFormatCVC),n.on("change",e.reFormatCVC),n.on("input",e.reFormatCVC)}}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){"use strict";var r=n(188),o=n(199);e.exports=o(r,"Browser")},function(e,t,n){var r=n(106),o=n(52),a=n(53);function i(e,t){this.indexName=t,this.as=e,this.typeAheadArgs=null,this.typeAheadValueOption=null,this.cache={}}e.exports=i,i.prototype.clearCache=function(){this.cache={}},i.prototype.search=r("query"),i.prototype.similarSearch=o(r("similarQuery"),a("index.similarSearch(query[, callback])","index.search({ similarQuery: query }[, callback])")),i.prototype.browse=function(e,t,r){var o,a,i=n(107),c=this;0===arguments.length||1===arguments.length&&"function"==typeof arguments[0]?(o=0,r=arguments[0],e=void 0):"number"==typeof arguments[0]?(o=arguments[0],"number"==typeof arguments[1]?a=arguments[1]:"function"==typeof arguments[1]&&(r=arguments[1],a=void 0),e=void 0,t=void 0):"object"==typeof arguments[0]?("function"==typeof arguments[1]&&(r=arguments[1]),t=arguments[0],e=void 0):"string"==typeof arguments[0]&&"function"==typeof arguments[1]&&(r=arguments[1],t=void 0),t=i({},t||{},{page:o,hitsPerPage:a,query:e});var s=this.as._getSearchParams(t,"");return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(c.indexName)+"/browse",body:{params:s},hostType:"read",callback:r})},i.prototype.browseFrom=function(e,t){return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/browse",body:{cursor:e},hostType:"read",callback:t})},i.prototype.searchForFacetValues=function(e,t){var r=n(9),o=n(108);if(void 0===e.facetName||void 0===e.facetQuery)throw new Error("Usage: index.searchForFacetValues({facetName, facetQuery, ...params}[, callback])");var a=e.facetName,i=o(r(e),(function(e){return"facetName"===e})),c=this.as._getSearchParams(i,"");return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/facets/"+encodeURIComponent(a)+"/query",hostType:"read",body:{params:c},callback:t})},i.prototype.searchFacet=o((function(e,t){return this.searchForFacetValues(e,t)}),a("index.searchFacet(params[, callback])","index.searchForFacetValues(params[, callback])")),i.prototype._search=function(e,t,n,r){return this.as._jsonRequest({cache:this.cache,method:"POST",url:t||"/1/indexes/"+encodeURIComponent(this.indexName)+"/query",body:{params:e},hostType:"read",fallback:{method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName),body:{params:e}},callback:n,additionalUA:r})},i.prototype.getObject=function(e,t,n){var r=this;1!==arguments.length&&"function"!=typeof t||(n=t,t=void 0);var o="";if(void 0!==t){o="?attributes=";for(var a=0;a<t.length;++a)0!==a&&(o+=","),o+=t[a]}return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(r.indexName)+"/"+encodeURIComponent(e)+o,hostType:"read",callback:n})},i.prototype.getObjects=function(e,t,r){var o=n(1),a=n(19),i="Usage: index.getObjects(arrayOfObjectIDs[, callback])";if(!o(e))throw new Error(i);var c=this;1!==arguments.length&&"function"!=typeof t||(r=t,t=void 0);var s={requests:a(e,(function(e){var n={indexName:c.indexName,objectID:e};return t&&(n.attributesToRetrieve=t.join(",")),n}))};return this.as._jsonRequest({method:"POST",url:"/1/indexes/*/objects",hostType:"read",body:s,callback:r})},i.prototype.as=null,i.prototype.indexName=null,i.prototype.typeAheadArgs=null,i.prototype.typeAheadValueOption=null},function(e,t,n){e.exports=function(e,t){return function(n,o,a){if("function"==typeof n&&"object"==typeof o||"object"==typeof a)throw new r.AlgoliaSearchError("index.search usage is index.search(query, params, cb)");0===arguments.length||"function"==typeof n?(a=n,n=""):1!==arguments.length&&"function"!=typeof o||(a=o,o=void 0),"object"==typeof n&&null!==n?(o=n,n=void 0):null==n&&(n="");var i,c="";return void 0!==n&&(c+=e+"="+encodeURIComponent(n)),void 0!==o&&(o.additionalUA&&(i=o.additionalUA,delete o.additionalUA),c=this.as._getSearchParams(o,c)),this._search(c,t,a,i)}};var r=n(17)},function(e,t,n){var r=n(18);e.exports=function e(t){var n=Array.prototype.slice.call(arguments);return r(n,(function(n){for(var r in n)n.hasOwnProperty(r)&&("object"==typeof t[r]&&"object"==typeof n[r]?t[r]=e({},t[r],n[r]):void 0!==n[r]&&(t[r]=n[r]))})),t}},function(e,t,n){e.exports=function(e,t){var r=n(190),o=n(18),a={};return o(r(e),(function(n){!0!==t(n)&&(a[n]=e[n])})),a}},function(e,t){e.exports=function(e,t){t(e,0)}},,,,,,,,,,,function(e,t,n){var r,o;r=[n(121),n(170),n(171),n(49),n(172),n(173),n(174),n(175),n(50),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(54),n(207),n(208),n(209),n(210),n(211),n(212),n(55),n(213),n(214),n(215),n(56),n(57),n(216),n(217),n(58),n(59),n(218),n(219),n(103),n(220),n(30),n(60),n(61),n(62),n(221),n(222)],void 0===(o=function(){return angular.module("SharelatexApp").config(["$locationProvider",function(e){try{return e.html5Mode({enabled:!0,requireBase:!1,rewriteLinks:!1})}catch(e){return console.error("Error while trying to fix '#' links: ",e)}}]),angular.bootstrap(document.body,["SharelatexApp"])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(122),n(166),n(167),n(168),n(169),n(30)],void 0===(o=function(){}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(165)],void 0===(o=function(e){e.controller("ProjectPageController",["$scope","$modal","$window","queuedHttp","eventTracking","$timeout","localStorage","ProjectListService",function(e,t,n,r,o,a,i,c){e.projects=window.data.projects,e.tags=window.data.tags,e.notifications=window.data.notifications,e.notificationsInstitution=window.data.notificationsInstitution,e.allSelected=!1,e.selectedProjects=[],e.filter="all",e.predicate="lastUpdated",e.nUntagged=0,e.reverse=!0,e.searchText={value:""},e.$watch("predicate",(function(t){e.comparator="ownerName"===t?l:u})),a((function(){return s()}),10),e.$watch((function(){return e.projects.filter((function(e){return(null==e.tags||0===e.tags.length)&&!e.archived})).length}),(function(t){return e.nUntagged=t}));var s=function(){var t=$(".project-list-card");if(t&&t.offset()){var r=t.offset().top,o=t.outerHeight()-t.height(),a=$("footer").outerHeight(),i=n.innerHeight-r-a-o;e.projectListHeight=i}};function u(t,n){var r=0,o=t.type,a=n.type;if("ownerName"!==e.predicate){if(o===a){var i=t.value,c=n.value;"string"===o?(i=i.toLowerCase(),c=c.toLowerCase()):"object"===o&&(angular.isObject(i)&&(i=t.index),angular.isObject(c)&&(c=n.index)),i!==c&&(r=i<c?-1:1)}else r=o<a?-1:1;return r}}function l(t,n){if("ownerName"===e.predicate)return"You"===t.value?"You"===n.value&&t.index<n.index?-1:1:"An Overleaf v1 User"===t.value||"None"===t.value?"An Overleaf v1 User"===n.value||"None"===n.value?t.index<n.index?-1:1:-1:"You"===n.value?-1:"An Overleaf v1 User"===n.value||"None"===n.value?1:t.value>n.value?-1:1}angular.element(n).bind("resize",(function(){s(),e.$apply()})),e.$on("project-list:notifications-received",(function(){return e.$applyAsync((function(){return s()}))}));var d={},p=!0,f=!1,m=void 0;try{for(var h,y=e.projects[Symbol.iterator]();!(p=(h=y.next()).done);p=!0){var g=h.value;d[g.id]=g}}catch(e){f=!0,m=e}finally{try{p||null==y.return||y.return()}finally{if(f)throw m}}e.getProjectById=function(e){return d[e]};var v=!0,w=!1,b=void 0;try{for(var T,S=e.tags[Symbol.iterator]();!(v=(T=S.next()).done);v=!0){var C=T.value,j=!0,x=!1,k=void 0;try{for(var P,A=(C.project_ids||[])[Symbol.iterator]();!(j=(P=A.next()).done);j=!0){var I=P.value,E=d[I];E&&(E.tags||(E.tags=[]),E.tags.push(C))}}catch(e){x=!0,k=e}finally{try{j||null==A.return||A.return()}finally{if(x)throw k}}}}catch(e){w=!0,b=e}finally{try{v||null==S.return||S.return()}finally{if(w)throw b}}e.changePredicate=function(t){e.predicate===t&&(e.reverse=!e.reverse),e.predicate=t},e.getSortIconClass=function(t){return t===e.predicate&&e.reverse?"fa-caret-down":t!==e.predicate||e.reverse?"":"fa-caret-up"},e.searchProjects=function(){o.send("project-list-page-interaction","project-search","keydown"),e.updateVisibleProjects()},e.clearSearchText=function(){e.searchText.value="",e.filter="all",e.$emit("search:clear"),e.updateVisibleProjects()},e.setFilter=function(t){e.filter=t,e.updateVisibleProjects()},e.updateSelectedProjects=function(){e.selectedProjects=e.projects.filter((function(e){return e.selected}))},e.getSelectedProjects=function(){return e.selectedProjects},e.getSelectedProjectIds=function(){return e.selectedProjects.map((function(e){return e.id}))},e.getFirstSelectedProject=function(){return e.selectedProjects[0]},e.hasLeavableProjectsSelected=function(){return _.some(e.getSelectedProjects(),(function(e){return"owner"!==e.accessLevel&&e.trashed}))},e.hasDeletableProjectsSelected=function(){return _.some(e.getSelectedProjects(),(function(e){return"owner"===e.accessLevel&&e.trashed}))},e.updateVisibleProjects=function(){e.visibleProjects=[];var t=e.getSelectedTag(),n=!0,r=!1,o=void 0;try{for(var a,c=e.projects[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var s=a.value,u=!0;""!==e.searchText.value&&-1===s.name.toLowerCase().indexOf(e.searchText.value.toLowerCase())&&(u=!1),"tag"!==e.filter||null==t||t.project_ids.includes(s.id)||(u=!1),"untagged"===e.filter&&(null!=s.tags?s.tags.length:void 0)>0&&(u=!1),"shared"===e.filter&&"owner"===s.accessLevel&&(u=!1),"shared"===e.filter&&s.isV1Project&&(u=!1),"owned"===e.filter&&"owner"!==s.accessLevel&&(u=!1),"archived"===e.filter?s.archived||(u=!1):s.archived&&(u=!1),"trashed"===e.filter?s.trashed||(u=!1):s.trashed&&(u=!1),"v1"!==e.filter||s.isV1Project||(u=!1),u?e.visibleProjects.push(s):s.selected=!1}}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}i("project_list",JSON.stringify({filter:e.filter,selectedTagId:null!=t?t._id:void 0})),e.updateSelectedProjects()},e.getSelectedTag=function(){var t=!0,n=!1,r=void 0;try{for(var o,a=e.tags[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;if(i.selected)return i}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null},e._removeProjectIdsFromTagArray=function(e,t){var n=[],r=[],o=!0,a=!1,i=void 0;try{for(var c,s=e.project_ids[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;t.includes(u)?r.push(u):n.push(u)}}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}return e.project_ids=n,r},e._removeProjectFromList=function(t){var n=e.projects.indexOf(t);n>-1&&e.projects.splice(n,1)},e.removeSelectedProjectsFromTag=function(t){t.showWhenEmpty=!0;var n=e.getSelectedProjectIds(),o=e.getSelectedProjects(),a=e._removeProjectIdsFromTagArray(t,n),i=!0,c=!1,s=void 0;try{for(var u,l=o[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var d=u.value;d.tags||(d.tags=[]);var p=d.tags.indexOf(t);p>-1&&d.tags.splice(p,1)}}catch(e){c=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(c)throw s}}var f=!0,m=!1,h=void 0;try{for(var y,g=a[Symbol.iterator]();!(f=(y=g.next()).done);f=!0){var v=y.value;r({method:"DELETE",url:"/tag/".concat(t._id,"/project/").concat(v),headers:{"X-CSRF-Token":window.csrfToken}})}}catch(e){m=!0,h=e}finally{try{f||null==g.return||g.return()}finally{if(m)throw h}}e.updateVisibleProjects()},e.removeProjectFromTag=function(t,n){n.showWhenEmpty=!0,t.tags||(t.tags=[]);var o=t.tags.indexOf(n);o>-1&&(e._removeProjectIdsFromTagArray(n,[t.id]),t.tags.splice(o,1),r({method:"DELETE",url:"/tag/".concat(n._id,"/project/").concat(t.id),headers:{"X-CSRF-Token":window.csrfToken}}),e.updateVisibleProjects())},e.addSelectedProjectsToTag=function(t){var n=e.getSelectedProjects();o.send("project-list-page-interaction","project action","addSelectedProjectsToTag");var a=[],i=!0,c=!1,s=void 0;try{for(var u,l=e.getSelectedProjectIds()[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var d=u.value;t.project_ids.includes(d)||(t.project_ids.push(d),a.push(d))}}catch(e){c=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(c)throw s}}var p=!0,f=!1,m=void 0;try{for(var h,y=n[Symbol.iterator]();!(p=(h=y.next()).done);p=!0){var g=h.value;g.tags||(g.tags=[]),g.tags.includes(t)||g.tags.push(t)}}catch(e){f=!0,m=e}finally{try{p||null==y.return||y.return()}finally{if(f)throw m}}for(var v=0,w=a;v<w.length;v++){var b=w[v];r.post("/tag/".concat(t._id,"/project/").concat(b),{_csrf:window.csrfToken})}},e.openNewTagModal=function(n){t.open({templateUrl:"newTagModalTemplate",controller:"NewTagModalController"}).result.then((function(t){e.tags.find((function(e){return t.name===e.name}))||(e.tags.push(t),e.addSelectedProjectsToTag(t))}))},e.createProject=function(t,n){return null==n&&(n="none"),r.post("/project/new",{_csrf:window.csrfToken,projectName:t,template:n}).then((function(n){var r=n.data;e.projects.push({name:t,_id:r.project_id,accessLevel:"owner",owner:{_id:window.user_id}}),e.updateVisibleProjects()}))},e.openCreateProjectModal=function(n){null==n&&(n="none"),o.send("project-list-page-interaction","new-project",n),t.open({templateUrl:"newProjectModalTemplate",controller:"NewProjectModalController",resolve:{template:function(){return n}},scope:e}).result.then((function(e){return window.location="/project/".concat(e)}))},e.renameProject=function(e,t){return r.post("/project/".concat(e.id,"/rename"),{newProjectName:t,_csrf:window.csrfToken}).then((function(){return e.name=t}))},e.openRenameProjectModal=function(){var n=e.getFirstSelectedProject();n&&"owner"===n.accessLevel&&(o.send("project-list-page-interaction","project action","Rename"),t.open({templateUrl:"renameProjectModalTemplate",controller:"RenameProjectModalController",resolve:{project:function(){return n}},scope:e}))},e.cloneProject=function(t,n){return o.send("project-list-page-interaction","project action","Clone"),r.post("/project/".concat(t.id,"/clone"),{_csrf:window.csrfToken,projectName:n}).then((function(t){var n=t.data;e.projects.push({name:n.name,id:n.project_id,accessLevel:"owner",owner:{_id:n.owner_ref}}),e.updateVisibleProjects()}))},e.openCloneProjectModal=function(){var n=e.getFirstSelectedProject();n&&t.open({templateUrl:"cloneProjectModalTemplate",controller:"CloneProjectModalController",resolve:{project:function(){return n}},scope:e})};var M=function(e,n){return o.send("project-list-page-interaction","project action",e),t.open({templateUrl:"archiveTrashLeaveOrDeleteProjectsModalTemplate",controller:"ArchiveTrashLeaveOrDeleteProjectsModalController",resolve:{projects:function(){return n},action:function(){return e}}})};e.createArchiveProjectsModal=function(e){return M("archive",e)},e.createTrashProjectsModal=function(e){return M("trash",e)},e.createLeaveProjectsModal=function(e){return M("leave",e)},e.createDeleteProjectsModal=function(e){return M("delete",e)},e.createLeaveOrDeleteProjectsModal=function(e){return M("leaveOrDelete",e)},e.openArchiveProjectsModal=function(){e.createArchiveProjectsModal(e.getSelectedProjects()).result.then((function(){return e.archiveSelectedProjects()}))},e.openTrashProjectsModal=function(){e.createTrashProjectsModal(e.getSelectedProjects()).result.then((function(){return e.trashSelectedProjects()}))},e.openLeaveProjectsModal=function(){e.createLeaveProjectsModal(e.getSelectedProjects()).result.then((function(){return e.leaveSelectedProjects()}))},e.openDeleteProjectsModal=function(){e.createDeleteProjectsModal(e.getSelectedProjects()).result.then((function(){return e.deleteSelectedProjects()}))},e.openLeaveOrDeleteProjectsModal=function(){e.createLeaveOrDeleteProjectsModal(e.getSelectedProjects()).result.then((function(){return e.leaveOrDeleteSelectedProjects()}))},e.archiveSelectedProjects=function(){return e.archiveProjects(e.getSelectedProjects())},e.unarchiveSelectedProjects=function(){return e.unarchiveProjects(e.getSelectedProjects())},e.trashSelectedProjects=function(){return e.trashProjects(e.getSelectedProjects())},e.untrashSelectedProjects=function(){return e.untrashProjects(e.getSelectedProjects())},e.leaveSelectedProjects=function(){return e.leaveProjects(e.getSelectedProjects())},e.deleteSelectedProjects=function(){return e.deleteProjects(e.getSelectedProjects())},e.leaveOrDeleteSelectedProjects=function(){return e.leaveOrDeleteProjects(e.getSelectedProjects())},e.archiveProjects=function(t){var n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value;c.archived=!0,c.trashed=!1,R(c)}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}e.updateVisibleProjects()},e.unarchiveProjects=function(t){var n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value;c.archived=!1,U(c)}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}e.updateVisibleProjects()},e.trashProjects=function(t){var n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value;c.trashed=!0,c.archived=!1,N(c)}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}e.updateVisibleProjects()},e.untrashProjects=function(t){var n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value;c.trashed=!1,O(c)}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}e.updateVisibleProjects()},e.leaveProjects=function(t){q(t);var n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value;D(c)}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}e.updateVisibleProjects()},e.deleteProjects=function(t){q(t);var n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value;L(c)}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}e.updateVisibleProjects()},e.leaveOrDeleteProjects=function(t){q(t);var n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value;"owner"===c.accessLevel?L(c):D(c)}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}e.updateVisibleProjects()};var R=function(e){return r({method:"POST",url:"/project/".concat(e.id,"/archive"),headers:{"X-CSRF-Token":window.csrfToken}})},U=function(e){return r({method:"DELETE",url:"/project/".concat(e.id,"/archive"),headers:{"X-CSRF-Token":window.csrfToken}})},N=function(e){return r({method:"POST",url:"/project/".concat(e.id,"/trash"),headers:{"X-CSRF-Token":window.csrfToken}})},O=function(e){return r({method:"DELETE",url:"/project/".concat(e.id,"/trash"),headers:{"X-CSRF-Token":window.csrfToken}})},D=function(e){return r({method:"POST",url:"/project/".concat(e.id,"/leave"),headers:{"X-CSRF-Token":window.csrfToken}})},L=function(e){return r({method:"DELETE",url:"/project/".concat(e.id,"?forever=true"),headers:{"X-CSRF-Token":window.csrfToken}})},q=function(t){var n=t.map((function(e){return e.id})),r=!0,o=!1,a=void 0;try{for(var i,c=(e.tags||[])[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var s=i.value;e._removeProjectIdsFromTagArray(s,n)}}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}var u=!0,l=!1,d=void 0;try{for(var p,f=(t||[])[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var m=p.value;e._removeProjectFromList(m)}}catch(e){l=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(l)throw d}}};e.getValueForCurrentPredicate=function(t){return"ownerName"===e.predicate?c.getOwnerName(t):t[e.predicate]},e.openUploadProjectModal=function(){t.open({templateUrl:"uploadProjectModalTemplate",controller:"UploadProjectModalController"})},e.downloadSelectedProjects=function(){return e.downloadProjectsById(e.getSelectedProjectIds())},e.downloadProjectsById=function(e){var t;return o.send("project-list-page-interaction","project action","Download Zip"),t=e.length>1?"/project/download/zip?project_ids=".concat(e.join(",")):"/project/".concat(e[0],"/download/zip"),window.location=t};var F=JSON.parse(i("project_list"));F&&F.filter?("tag"===F.filter&&F.selectedTagId&&function(t){var n=!0,r=!1,o=void 0;try{for(var a,i=e.tags[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value;c._id===t?c.selected=!0:c.selected=!1}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}}(F.selectedTagId),e.setFilter(F.filter)):e.updateVisibleProjects()}]),e.controller("ProjectListItemController",["$scope","$modal","queuedHttp","ProjectListService",function(e,t,n,r){e.projectLink=function(e){return"readAndWrite"===e.accessLevel&&"token"===e.source?"/".concat(e.tokens.readAndWrite):"readOnly"===e.accessLevel&&"token"===e.source?"/read/".concat(e.tokens.readOnly):"/project/".concat(e.id)},e.isLinkSharingProject=function(e){return"token"===e.source},e.hasGenericOwnerName=function(){var t=e.project.owner,n=t.first_name,r=t.last_name,o=t.email;return!n&&!r&&!o},e.getOwnerName=r.getOwnerName,e.getUserName=r.getUserName,e.isOwner=function(){return e.project.owner&&window.user_id===e.project.owner._id},e.$watch("project.selected",(function(t){null!=t&&e.updateSelectedProjects()})),e.clone=function(n){return n.stopPropagation(),e.project.isTableActionInflight=!0,e.cloneProject(e.project,"".concat(e.project.name," (Copy)")).then((function(){return e.project.isTableActionInflight=!1})).catch((function(n){var r=n.data,o=400!==n.status||{message:r};t.open({templateUrl:"showErrorModalTemplate",controller:"ShowErrorModalController",resolve:{error:function(){return o}}}),e.project.isTableActionInflight=!1}))},e.download=function(t){t.stopPropagation(),e.downloadProjectsById([e.project.id])},e.archive=function(t){t.stopPropagation(),e.createArchiveProjectsModal([e.project]).result.then((function(){e.archiveProjects([e.project])}))},e.unarchive=function(t){t.stopPropagation(),e.unarchiveProjects([e.project])},e.trash=function(t){t.stopPropagation(),e.createTrashProjectsModal([e.project]).result.then((function(){e.trashProjects([e.project])}))},e.untrash=function(t){t.stopPropagation(),e.untrashProjects([e.project])},e.leave=function(t){t.stopPropagation(),e.createLeaveProjectsModal([e.project]).result.then((function(){e.leaveProjects([e.project])}))},e.delete=function(t){t.stopPropagation(),e.createDeleteProjectsModal([e.project]).result.then((function(){e.deleteProjects([e.project])}))}}])}.apply(t,r))||(e.exports=o)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.service("ProjectListService",(function(){return{getOwnerName:function(e){return"owner"===e.accessLevel?"You":null!=e.owner?this.getUserName(e.owner):"None"},getUserName:function(e){if(e&&e._id===window.user_id)return"You";if(e){var t=e.first_name,n=e.last_name,r=e.email;return t||n?[t,n].filter((function(e){return null!=e})).join(" "):r||"An Overleaf v1 User"}return"None"}}}))}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.controller("RenameProjectModalController",["$scope","$modalInstance","$timeout","project","queuedHttp",function(e,t,n,r,o){return e.inputs={projectName:r.name},e.state={inflight:!1,error:!1},t.opened.then((function(){return n((function(){return e.$broadcast("open")}),200)})),e.rename=function(){return e.state.inflight=!0,e.state.error=!1,e.renameProject(r,e.inputs.projectName).then((function(){return e.state.inflight=!1,e.state.error=!1,t.close()})).catch((function(t){var n=t.data,r=t.status;return e.state.inflight=!1,e.state.error=400!==r||{message:n}}))},e.cancel=function(){return t.dismiss("cancel")}}]),e.controller("CloneProjectModalController",["$scope","$modalInstance","$timeout","project",function(e,t,n,r){return e.inputs={projectName:r.name+" (Copy)"},e.state={inflight:!1,error:!1},t.opened.then((function(){return n((function(){return e.$broadcast("open")}),200)})),e.clone=function(){return e.state.inflight=!0,e.cloneProject(r,e.inputs.projectName).then((function(){return e.state.inflight=!1,e.state.error=!1,t.close()})).catch((function(t){var n=t.data,r=t.status;return e.state.inflight=!1,e.state.error=400!==r||{message:n}}))},e.cancel=function(){return t.dismiss("cancel")}}]),e.controller("NewProjectModalController",["$scope","$modalInstance","$timeout","template",function(e,t,n,r){return e.inputs={projectName:""},e.state={inflight:!1,error:!1},t.opened.then((function(){return n((function(){return e.$broadcast("open")}),200)})),e.create=function(){return e.state.inflight=!0,e.state.error=!1,e.createProject(e.inputs.projectName,r).then((function(n){var r=n.data;return e.state.inflight=!1,e.state.error=!1,t.close(r.project_id)})).catch((function(t){var n=t.data,r=t.status;return e.state.inflight=!1,e.state.error=400!==r||{message:n}}))},e.cancel=function(){return t.dismiss("cancel")}}]),e.controller("ArchiveTrashLeaveOrDeleteProjectsModalController",["$scope","$modalInstance","$timeout","projects","action",function(e,t,n,r,o){e.projects=r,e.action=o,e.confirm=function(){return t.close({projects:r,action:o})},e.cancel=function(){return t.dismiss("cancel")}}]),e.controller("UploadProjectModalController",["$scope","$modalInstance","$timeout",function(e,t,n){return e.cancel=function(){return t.dismiss("cancel")},e.onComplete=function(e,t,n){if(null!=n.project_id)return window.location="/project/".concat(n.project_id)}}]),e.controller("V1ImportModalController",["$scope","$modalInstance","project",function(e,t,n){return e.project=n,e.dismiss=function(){return t.dismiss("cancel")}}]),e.controller("ShowErrorModalController",["$scope","$modalInstance","error",function(e,t,n){return e.error=n,e.cancel=function(){return t.dismiss("cancel")}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(5)],void 0===(o=function(e,t){return e.controller("TagListController",["$scope","$modal",function(e,n){e.filterProjects=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";e._clearTags(),e.setFilter(t)},e._clearTags=function(){return e.tags.forEach((function(e){e.selected=!1}))},e.selectTag=function(t){e._clearTags(),t.selected=!0,e.setFilter("tag")},e.selectUntagged=function(){e._clearTags(),e.setFilter("untagged")},e.countProjectsForTag=function(t){return t.project_ids.reduce((function(t,n){var r=e.getProjectById(n);return r?r.archived?t:t+1:t}),0)},e.getHueForTagId=function(e){return t.getHueForTagId(e)},e.deleteTag=function(t){n.open({templateUrl:"deleteTagModalTemplate",controller:"DeleteTagModalController",resolve:{tag:function(){return t}}}).result.then((function(){var n=!0,r=!1,o=void 0;try{for(var a,i=e.projects[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value;c.tags||(c.tags=[]);var s=c.tags.indexOf(t);s>-1&&c.tags.splice(s,1)}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}e.tags=e.tags.filter((function(e){return e!==t}))}))},e.renameTag=function(e){n.open({templateUrl:"renameTagModalTemplate",controller:"RenameTagModalController",resolve:{tag:function(){return e}}}).result.then((function(t){return e.name=t}))}}]),e.controller("TagDropdownItemController",["$scope",function(e){e.recalculateProjectsInTag=function(){var t;e.areSelectedProjectsInTag=!1;var n=!0,r=!1,o=void 0;try{for(var a,i=e.getSelectedProjectIds()[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value;e.tag.project_ids.includes(c)?e.areSelectedProjectsInTag=!0:t=!0}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}e.areSelectedProjectsInTag&&t&&(e.areSelectedProjectsInTag="partial")},e.addOrRemoveProjectsFromTag=function(){!0===e.areSelectedProjectsInTag?(e.removeSelectedProjectsFromTag(e.tag),e.areSelectedProjectsInTag=!1):!1!==e.areSelectedProjectsInTag&&"partial"!==e.areSelectedProjectsInTag||(e.addSelectedProjectsToTag(e.tag),e.areSelectedProjectsInTag=!0)},e.$watch("selectedProjects",(function(){return e.recalculateProjectsInTag()})),e.recalculateProjectsInTag()}]),e.controller("NewTagModalController",["$scope","$modalInstance","$timeout","$http",function(e,t,n,r){e.inputs={newTagName:""},e.state={inflight:!1,error:!1},t.opened.then((function(){return n((function(){return e.$broadcast("open")}),200)})),e.create=function(){var n=e.inputs.newTagName;e.state.inflight=!0,e.state.error=!1,r.post("/tag",{_csrf:window.csrfToken,name:n}).then((function(n){var r=n.data;e.state.inflight=!1,t.close(r)})).catch((function(){e.state.inflight=!1,e.state.error=!0}))},e.cancel=function(){return t.dismiss("cancel")}}]),e.controller("RenameTagModalController",["$scope","$modalInstance","$timeout","$http","tag",function(e,t,n,r,o){e.inputs={tagName:o.name},e.state={inflight:!1,error:!1},t.opened.then((function(){return n((function(){return e.$broadcast("open")}),200)})),e.rename=function(){var n=e.inputs.tagName;return e.state.inflight=!0,e.state.error=!1,r.post("/tag/".concat(o._id,"/rename"),{_csrf:window.csrfToken,name:n}).then((function(){e.state.inflight=!1,t.close(n)})).catch((function(){e.state.inflight=!1,e.state.error=!0}))},e.cancel=function(){return t.dismiss("cancel")}}]),e.controller("DeleteTagModalController",["$scope","$modalInstance","$http","tag",function(e,t,n,r){e.tag=r,e.state={inflight:!1,error:!1},e.delete=function(){return e.state.inflight=!0,e.state.error=!1,n({method:"DELETE",url:"/tag/".concat(r._id),headers:{"X-CSRF-Token":window.csrfToken}}).then((function(){e.state.inflight=!1,t.close()})).catch((function(){e.state.inflight=!1,e.state.error=!0}))},e.cancel=function(){return t.dismiss("cancel")}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.controller("NotificationsController",["$scope","$http",function(e,t){for(var n=0,r=Array.from(e.notifications);n<r.length;n++){r[n].hide=!1}return e.samlInitPath=ExposedSettings.samlInitPath,e.dismiss=function(e){return t({url:"/notifications/".concat(e._id),method:"DELETE",headers:{"X-Csrf-Token":window.csrfToken}}).then((function(){return e.hide=!0}))}}]),e.controller("ProjectInviteNotificationController",["$scope","$http",function(e,t){return e.projectName=e.notification.messageOpts.projectName,e.userName=e.notification.messageOpts.userName,e.accept=function(){return e.notification.inflight=!0,t({url:"/project/".concat(e.notification.messageOpts.projectId,"/invite/token/").concat(e.notification.messageOpts.token,"/accept"),method:"POST",headers:{"X-Csrf-Token":window.csrfToken,"X-Requested-With":"XMLHttpRequest"}}).then((function(){e.notification.accepted=!0})).catch((function(t){404===t.status?e.notification.accepted=!0:e.notification.error=!0})).finally((function(){e.notification.inflight=!1}))}}]),e.controller("OverleafV2NotificationController",["$scope","localStorage",function(e,t){return e.visible=!t("overleaf_v2_2_notification_hidden_at"),e.dismiss=function(){return e.visible=!1,t("overleaf_v2_2_notification_hidden_at",Date.now())}}]),e.controller("OverleafV1NotificationController",["$scope","localStorage",function(e,t){return e.visible=!t("overleaf_v1_notification_hidden_at"),e.toggle=function(){return e.visible=!e.visible,e.visible?t("overleaf_v1_notification_hidden_at",null):t("overleaf_v1_notification_hidden_at",Date.now())}}]),e.controller("EmailNotificationController",["$scope","$http","UserAffiliationsDataService",function(e,t,n){e.userEmails=[];e.showConfirmEmail=function(e){return!ExposedSettings.emailConfirmationDisabled&&(!e.confirmedAt&&!e.hide&&!function(e){return!!ExposedSettings.hasSamlFeature&&(!(!e.affiliation||!e.affiliation.institution)&&(!!e.affiliation.institution.ssoEnabled||!(!ExposedSettings.hasSamlBeta||!e.affiliation.institution.ssoBeta)))}(e))};for(var r=0,o=Array.from(e.userEmails);r<o.length;r++){o[r].hide=!1}return n.getUserEmails().then((function(t){return e.userEmails=t,e.$emit("project-list:notifications-received")})),e.resendConfirmationEmail=function(t){return t.confirmationInflight=!0,n.resendConfirmationEmail(t.email).then((function(){return t.hide=!0,t.confirmationInflight=!1,e.$emit("project-list:notifications-received")}))}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.controller("LeftHandMenuPromoController",["$scope","UserAffiliationsDataService","eventTracking",function(e,t,n){e.hasProjects=window.data.projects.length>0,e.userHasNoSubscription=window.userHasNoSubscription,e.upgradeSubscription=function(){n.send("subscription-funnel","project-page","upgrade")},e.share=function(){n.send("subscription-funnel","project-page","sharing")};e.userEmails=[],e.userAffiliations=[],t.getUserEmails().then((function(t){e.userEmails=t,e.userAffiliations=t.filter((function(e){return e.affiliation})).map((function(e){return e.affiliation})),e.userOnPayingUniversity=e.userAffiliations.some((function(e){return"free"!==e.institution.licence}))}))}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){e.controller("AccountSettingsController",["$scope","$http","$modal","eventTracking","UserAffiliationsDataService",function(e,t,n,r,o){e.subscribed=!0,e.unsubscribe=function(){return e.unsubscribing=!0,t({method:"DELETE",url:"/user/newsletter/unsubscribe",headers:{"X-CSRF-Token":window.csrfToken}}).then((function(){e.unsubscribing=!1,e.subscribed=!1})).catch((function(){return e.unsubscribing=!0}))},e.deleteAccount=function(){n.open({templateUrl:"deleteAccountModalTemplate",controller:"DeleteAccountModalController",resolve:{userDefaultEmail:function(){return o.getUserDefaultEmail().then((function(e){return(null!=e?e.email:void 0)||null})).catch((function(){return null}))}}})},e.upgradeIntegration=function(e){return r.send("subscription-funnel","settings-page",e)}}]),e.controller("DeleteAccountModalController",["$scope","$modalInstance","$timeout","$http","userDefaultEmail",function(e,t,n,r,o){e.state={isValid:!1,deleteText:"",password:"",confirmV1Purge:!1,confirmSharelatexDelete:!1,inflight:!1,error:null},e.userDefaultEmail=o,t.opened.then((function(){return n((function(){return e.$broadcast("open")}),700)})),e.checkValidation=function(){return e.state.isValid=null!=o&&e.state.deleteText.toLowerCase()===o.toLowerCase()&&e.state.password.length>0&&e.state.confirmV1Purge&&e.state.confirmSharelatexDelete},e.delete=function(){return e.state.inflight=!0,e.state.error=null,r({method:"POST",url:"/user/delete",headers:{"X-CSRF-Token":window.csrfToken,"Content-Type":"application/json"},data:{password:e.state.password},disableAutoLoginRedirect:!0}).then((function(){t.close(),e.state.inflight=!1,e.state.error=null,setTimeout((function(){return window.location="/login"}),1e3)})).catch((function(t){var n=t.data,r=t.status;e.state.inflight=!1,403===r?e.state.error={code:"InvalidCredentialsError"}:n.error?e.state.error={code:n.error}:e.state.error={code:"UserDeletionError"}}))},e.cancel=function(){return t.dismiss("cancel")}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.controller("ClearSessionsController",["$scope","$http",function(e,t){return e.state={otherSessions:window.otherSessions,error:!1,success:!1},e.clearSessions=function(){return console.log(">> clearing all sessions"),t({method:"POST",url:"/user/sessions/clear",headers:{"X-CSRF-Token":window.csrfToken}}).then((function(){return e.state.otherSessions=[],e.state.error=!1,e.state.success=!0})).catch((function(){return e.state.error=!0}))}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){e.factory("MultiCurrencyPricing",(function(){return{currencyCode:window.recomendedCurrency,plans:{USD:{symbol:"$",student:{monthly:"$8",annual:"$80"},collaborator:{monthly:"$15",annual:"$180"},professional:{monthly:"$30",annual:"$360"}},EUR:{symbol:"€",student:{monthly:"€7",annual:"€70"},collaborator:{monthly:"€14",annual:"€168"},professional:{monthly:"€28",annual:"€336"}},GBP:{symbol:"£",student:{monthly:"£6",annual:"£60"},collaborator:{monthly:"£12",annual:"£144"},professional:{monthly:"£24",annual:"£288"}},SEK:{symbol:"kr",student:{monthly:"60 kr",annual:"600 kr"},collaborator:{monthly:"110 kr",annual:"1320 kr"},professional:{monthly:"220 kr",annual:"2640 kr"}},CAD:{symbol:"$",student:{monthly:"$9",annual:"$90"},collaborator:{monthly:"$17",annual:"$204"},professional:{monthly:"$34",annual:"$408"}},NOK:{symbol:"kr",student:{monthly:"60 kr",annual:"600 kr"},collaborator:{monthly:"110 kr",annual:"1320 kr"},professional:{monthly:"220 kr",annual:"2640 kr"}},DKK:{symbol:"kr",student:{monthly:"50 kr",annual:"500 kr"},collaborator:{monthly:"90 kr",annual:"1080 kr"},professional:{monthly:"180 kr",annual:"2160 kr"}},AUD:{symbol:"$",student:{monthly:"$10",annual:"$100"},collaborator:{monthly:"$18",annual:"$216"},professional:{monthly:"$35",annual:"$420"}},NZD:{symbol:"$",student:{monthly:"$10",annual:"$100"},collaborator:{monthly:"$18",annual:"$216"},professional:{monthly:"$35",annual:"$420"}},CHF:{symbol:"Fr",student:{monthly:"Fr 8",annual:"Fr 80"},collaborator:{monthly:"Fr 15",annual:"Fr 180"},professional:{monthly:"Fr 30",annual:"Fr 360"}},SGD:{symbol:"$",student:{monthly:"$12",annual:"$120"},collaborator:{monthly:"$20",annual:"$240"},professional:{monthly:"$40",annual:"$480"}}}}})),e.controller("PlansController",["$scope","$modal","eventTracking","MultiCurrencyPricing","$http","$filter","ipCookie","$location",function(e,t,n,r,o,a,i,c){var s;e.showPlans=!0,e.plans=r.plans,e.currencyCode=r.currencyCode,e.trial_len=7,e.planQueryString="_free_trial_7_days",e.ui={view:"monthly"},e.changeCurreny=function(t,n){t.preventDefault(),e.currencyCode=n},e.getCollaboratorPlanCode=function(){return"annual"===e.ui.view?"collaborator-annual":"collaborator".concat(e.planQueryString)},e.signUpNowClicked=function(t,r){"annual"===e.ui.view&&(t="".concat(t,"_annual")),t=u(t,r),n.sendMB("plans-page-start-trial"),n.send("subscription-funnel","sign_up_now_button",t)},e.switchToMonthly=function(t,n){s(t,"monthly-prices",n),e.ui.view="monthly"},e.switchToStudent=function(t,n){s(t,"student-prices",n),e.ui.view="student"},e.switchToAnnual=function(t,n){s(t,"annual-prices",n),e.ui.view="annual"},e.openGroupPlanModal=function(){var e="".concat(window.location.pathname).concat(window.location.search);history.replaceState(null,document.title,e+"#groups"),t.open({templateUrl:"groupPlanModalPurchaseTemplate",controller:"GroupPlansModalPurchaseController"}).result.finally((function(){return history.replaceState(null,document.title,window.location.pathname)})),n.send("subscription-funnel","plans-page","group-inquiry-potential")},"groups"===c.hash()&&e.openGroupPlanModal(),e.openPayByInvoiceModal=function(){var e="".concat(window.location.pathname).concat(window.location.search);history.replaceState(null,document.title,e+"#pay-by-invoice"),t.open({templateUrl:"groupPlanModalInquiryTemplate"}).result.finally((function(){return history.replaceState(null,document.title,window.location.pathname)})),n.send("subscription-funnel","plans-page","group-inquiry-potential")},"pay-by-invoice"===c.hash()&&e.openPayByInvoiceModal();var u=function(e,t){return e};s=function(e,t,r){e.preventDefault();var o=u(t,r);n.send("subscription-funnel","plans-page",o)}}]),e.controller("GroupPlansModalPurchaseController",["$scope","$modal","$location",function(e,t,n){e.options={plan_codes:[{display:"Collaborator",code:"collaborator"},{display:"Professional",code:"professional"}],currencies:[{display:"USD ($)",code:"USD"},{display:"GBP (£)",code:"GBP"},{display:"EUR (€)",code:"EUR"}],currencySymbols:{USD:"$",EUR:"€",GBP:"£"},sizes:[2,3,4,5,10,20,50],usages:[{display:"Enterprise",code:"enterprise"},{display:"Educational",code:"educational"}]},e.prices=window.groupPlans;var r="USD";if(["USD","GBP","EUR"].includes(window.recomendedCurrency)&&(r=window.recomendedCurrency),e.selected={plan_code:"collaborator",currency:r,size:"10",usage:"educational"},n.search()){if(n.search().usage&&e.options.usages.forEach((function(t){t.code===n.search().usage&&(e.selected.usage=t.code)})),n.search().plan&&e.options.plan_codes.forEach((function(t){t.code===n.search().plan&&(e.selected.plan_code=t.code)})),n.search().number){var o=parseInt(n.search().number,10);-1!==e.options.sizes.indexOf(o)&&(e.selected.size=n.search().number)}n.search().currency&&e.options.currencies.forEach((function(t){t.code===n.search().currency&&(e.selected.currency=t.code)}))}e.recalculatePrice=function(){var t=e.selected,n=t.usage,r=t.plan_code,o=t.currency,a=t.size,i=e.prices[n][r][o][a],c=e.options.currencySymbols[o];e.displayPrice="".concat(c).concat(i)},e.$watch("selected",e.recalculatePrice,!0),e.recalculatePrice(),e.purchase=function(){var t=e.selected,n=t.plan_code,r=t.size,o=t.usage,a=t.currency;n="group_".concat(n,"_").concat(r,"_").concat(o),window.location="/user/subscription/new?planCode=".concat(n,"&currency=").concat(a,"&itm_campaign=groups")},e.payByInvoice=function(){t.open({templateUrl:"groupPlanModalInquiryTemplate"}),e.$close()}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.controller("PostGatewayController",["$scope",function(e){e.handleGateway=function(){var e=JSON.parse($("#gateway-data").text()).params;e.viaGateway="true",Object.keys(e).forEach((function(t){$("<input>").attr({type:"hidden",name:t,value:e[t]}).appendTo("#gateway")})),$("#gateway").submit()}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.controller("UserMembershipController",["$scope","queuedHttp",function(e,t){e.users=window.users,e.groupSize=window.groupSize,e.paths=window.paths,e.selectedUsers=[],e.inputs={addMembers:{content:"",error:!1,errorMessage:null,inflightCount:0},removeMembers:{error:!1,errorMessage:null}};return e.addMembers=function(){e.inputs.addMembers.error=!1,e.inputs.addMembers.errorMessage=null,e.inputs.addMembers.inflightCount=0;var n=function(e){var t=e.split(/[\s,]+/);return t=_.map(t,(function(e){return e.trim()})),t=_.filter(t,(function(e){return-1!==e.indexOf("@")}))}(e.inputs.addMembers.content);return Array.from(n).map((function(n){return e.inputs.addMembers.inflightCount+=1,t.post(paths.addMember,{email:n,_csrf:window.csrfToken}).then((function(t){e.inputs.addMembers.inflightCount-=1;var n=t.data;return null!=n.user&&e.users.push(n.user),e.inputs.addMembers.content=""})).catch((function(t){e.inputs.addMembers.inflightCount-=1;var n=t.data;return e.inputs.addMembers.error=!0,e.inputs.addMembers.errorMessage=null!=n.error?n.error.message:void 0}))}))},e.removeMembers=function(){e.inputs.removeMembers.error=!1,e.inputs.removeMembers.errorMessage=null;for(var n=0,r=Array.from(e.selectedUsers);n<r.length;n++){!function(n){var r;if(paths.removeInvite&&n.invite&&null==n._id)r="".concat(paths.removeInvite,"/").concat(encodeURIComponent(n.email));else{if(!paths.removeMember||null==n._id)return;r="".concat(paths.removeMember,"/").concat(n._id)}t({method:"DELETE",url:r,headers:{"X-Csrf-Token":window.csrfToken}}).then((function(){var t=e.users.indexOf(n);if(-1!==t)return e.users.splice(t,1)})).catch((function(t){var n=t.data;return e.inputs.removeMembers.error=!0,e.inputs.removeMembers.errorMessage=null!=n.error?n.error.message:void 0}))}(r[n])}return e.updateSelectedUsers},e.updateSelectedUsers=function(){return e.selectedUsers=e.users.filter((function(e){return e.selected}))}}]),e.controller("UserMembershipListItemController",["$scope",function(e){return e.$watch("user.selected",(function(t){if(null!=t)return e.updateSelectedUsers()}))}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.controller("ScribtexPopupController",["$scope","$modal",function(e,t){return t.open({templateUrl:"scribtexModalTemplate"})}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.controller("BonusLinksController",["$scope","$modal",function(e,t){return e.openLinkToUsModal=function(){return t.open({templateUrl:"BonusLinkToUsModal",controller:"BonusModalController"})}}]),e.controller("BonusModalController",["$scope","$modalInstance",function(e,t){return e.cancel=function(){return t.dismiss()}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.controller("SystemMessagesController",["$scope",function(e){return e.messages=window.systemMessages}]),e.controller("SystemMessageController",["$scope","$sce",function(e,t){return e.hidden=$.localStorage("systemMessage.hide.".concat(e.message._id)),e.htmlContent=e.message.content,e.hide=function(){return e.hidden=!0,$.localStorage("systemMessage.hide.".concat(e.message._id),!0)}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.controller("TranslationsPopupController",["$scope","ipCookie",function(e,t){return e.hidei18nNotification=t("hidei18nNotification"),e.dismiss=function(){return t("hidei18nNotification",!0,{expires:180}),e.hidei18nNotification=t("hidei18nNotification")}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){var t=_.once((function(){return!("undefined"==typeof recurly||!recurly)&&(recurly.configure(window.recurlyApiKey),!0)}));e.controller("MetricsEmailController",["$scope","$http",function(e,t){e.institutionEmailSubscription=function(e){return _.find(window.managedInstitutions,(function(t){return t.v1Id===parseInt(e)})).metricsEmail.optedOutUserIds.includes(window.user_id)?"Subscribe":"Unsubscribe"},e.changeInstitutionalEmailSubscription=function(n){return e.subscriptionChanging=!0,t({method:"POST",url:"/institutions/".concat(n,"/emailSubscription"),headers:{"X-CSRF-Token":window.csrfToken}}).then((function(t){window.managedInstitutions=_.map(window.managedInstitutions,(function(e){return e.v1Id===parseInt(n)&&(e.metricsEmail.optedOutUserIds=t.data),e})),e.subscriptionChanging=!1}))}}]),e.factory("RecurlyPricing",["$q","MultiCurrencyPricing",function(e,n){return{loadDisplayPriceWithTax:function(r,o,a){if(t()){var i=n.plans[o].symbol,c=recurly.Pricing();return e((function(e,t){c.plan(r,{quantity:1}).currency(o).done((function(t){var n=parseFloat(t.next.total),r=n*a;isNaN(r)&&(r=0);var o=n+r;o%1!=0&&(o=o.toFixed(2)),e("".concat(i).concat(o))}))}))}}}}]),e.controller("ChangePlanFormController",["$scope","$modal","RecurlyPricing",function(e,n,r){t()&&(e.changePlan=function(){return n.open({templateUrl:"confirmChangePlanModalTemplate",controller:"ConfirmChangePlanController",scope:e})},e.$watch("plan",(function(t){if(t){var n=t.planCode,o=window.subscription.recurly,a=o.currency,i=o.taxRate;e.price="...",r.loadDisplayPriceWithTax(n,a,i).then((function(t){e.price=t}))}})))}]),e.controller("ConfirmChangePlanController",["$scope","$modalInstance","$http",function(e,t,n){return e.confirmChangePlan=function(){var t={plan_code:e.plan.planCode,_csrf:window.csrfToken};return e.inflight=!0,n.post("".concat("/user/subscription/update","?origin=confirmChangePlan"),t).then((function(){return location.reload()})).catch((function(){return console.log("something went wrong changing plan")}))},e.cancel=function(){return t.dismiss("cancel")}}]),e.controller("LeaveGroupModalController",["$scope","$modalInstance","$http",function(e,t,n){return e.confirmLeaveGroup=function(){return e.inflight=!0,n({url:"/subscription/group/user",method:"DELETE",params:{admin_user_id:e.admin_id,_csrf:window.csrfToken}}).then((function(){return location.reload()})).catch((function(){return console.log("something went wrong changing plan")}))},e.cancel=function(){return t.dismiss("cancel")}}]),e.controller("GroupMembershipController",["$scope","$modal",function(e,t){e.removeSelfFromGroup=function(n){return e.admin_id=n,t.open({templateUrl:"LeaveGroupModalTemplate",controller:"LeaveGroupModalController",scope:e})}}]),e.controller("RecurlySubscriptionController",["$scope",function(e){var n=t();e.showChangePlanButton=n&&!subscription.groupPlan,e.recurlyLoadError=!n,e.switchToDefaultView=function(){e.showCancellation=!1,e.showChangePlan=!1},e.switchToDefaultView(),e.switchToCancellationView=function(){e.showCancellation=!0,e.showChangePlan=!1},e.switchToChangePlanView=function(){e.showCancellation=!1,e.showChangePlan=!0}}]),e.controller("RecurlyCancellationController",["$scope","RecurlyPricing","$http",function(e,n,r){if(t()){var o=window.subscription,a=new Date;a.setDate(a.getDate()+7);var i=new Date(o.recurly.trial_ends_at),c=i>new Date,s=i<a,u=-1!==o.plan.planCode.indexOf("collaborator")&&-1===o.plan.planCode.indexOf("ann")&&!o.groupPlan,l=c&&s;u&&l?e.showExtendFreeTrial=!0:u&&!l?e.showDowngradeToStudent=!0:e.showBasicCancel=!0;var d=window.subscription.recurly,p=d.currency,f=d.taxRate;e.studentPrice="...",n.loadDisplayPriceWithTax("student",p,f).then((function(t){e.studentPrice=t})),e.downgradeToStudent=function(){var t={plan_code:"student",_csrf:window.csrfToken};return e.inflight=!0,r.post("".concat("/user/subscription/update","?origin=downgradeToStudent"),t).then((function(){return location.reload()})).catch((function(){return console.log("something went wrong changing plan")}))},e.cancelSubscription=function(){var t={_csrf:window.csrfToken};return e.inflight=!0,r.post("/user/subscription/cancel",t).then((function(){return location.href="/user/subscription/canceled"})).catch((function(){return console.log("something went wrong changing plan")}))},e.extendTrial=function(){var t={_csrf:window.csrfToken};return e.inflight=!0,r.put("/user/subscription/extend",t).then((function(){return location.reload()})).catch((function(){return console.log("something went wrong changing plan")}))}}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(103)],void 0===(o=function(e){return e.controller("NewSubscriptionController",["$scope","MultiCurrencyPricing","$http","eventTracking","ccUtils",function(e,t,n,r,o){if("undefined"!=typeof recurly&&recurly){e.recurlyLoadError=!1,e.currencyCode=t.currencyCode,e.allCurrencies=t.plans,e.availableCurrencies={},e.planCode=window.plan_code,e.switchToStudent=function(){var t=window.plan_code.replace("collaborator","student");r.sendMB("subscription-form-switch-to-student",{plan:window.plan_code}),r.send("subscription-funnel","subscription-form-switch-to-student",window.plan_code),window.location="/user/subscription/new?planCode=".concat(t,"&currency=").concat(e.currencyCode,"&cc=").concat(e.data.coupon,"&itm_campaign=").concat(window.ITMCampaign,"&itm_content=").concat(window.ITMContent)},r.sendMB("subscription-form",{plan:window.plan_code}),r.send("subscription-funnel","subscription-form-viewed",window.plan_code),e.paymentMethod={value:"credit_card"},e.data={first_name:"",last_name:"",postal_code:"",address1:"",address2:"",state:"",city:"",country:window.countryCode,coupon:window.couponCode},e.validation={},e.processing=!1,e.threeDSecureFlow=!1,e.threeDSecureContainer=document.querySelector(".three-d-secure-container"),e.threeDSecureRecurlyContainer=document.querySelector(".three-d-secure-recurly-container"),recurly.configure({publicKey:window.recurlyApiKey,style:{all:{fontFamily:'"Open Sans", sans-serif',fontSize:"16px",fontColor:"#7a7a7a"},month:{placeholder:"MM"},year:{placeholder:"YY"},cvv:{placeholder:"CVV"}}});var a,i=recurly.Pricing();window.pricing=i,i.plan(window.plan_code,{quantity:1}).address({country:e.data.country}).tax({tax_code:"digital",vat_number:""}).currency(e.currencyCode).coupon(e.data.coupon).done(),i.on("change",(function(){for(var n in e.planName=i.items.plan.name,e.price=i.price,i.items.plan.trial&&(e.trialLength=i.items.plan.trial.length),e.monthlyBilling=1===i.items.plan.period.length,e.availableCurrencies={},i.items.plan.price)t.plans[n]&&(e.availableCurrencies[n]=t.plans[n]);if(i.items&&i.items.coupon&&i.items.coupon.discount&&"percent"===i.items.coupon.discount.type){var r=parseInt(i.price.base.plan.unit);e.normalPrice=r,i.items.coupon.applies_for_months>0&&i.items.coupon.discount.rate&&i.items.coupon.applies_for_months&&(e.discountMonths=i.items.coupon.applies_for_months,e.discountRate=100*i.items.coupon.discount.rate),i.price.taxes[0]&&i.price.taxes[0].rate&&(e.normalPrice+=r*i.price.taxes[0].rate)}e.$apply()})),e.applyCoupon=function(){return i.coupon(e.data.coupon).done()},e.applyVatNumber=function(){return i.tax({tax_code:"digital",vat_number:e.data.vat_number}).done()},e.changeCurrency=function(t){return e.currencyCode=t,i.currency(t).done()},e.inputHasError=function(e){return null!=e&&(e.$touched&&e.$invalid)},e.isFormValid=function(t){return"paypal"===e.paymentMethod.value?""!==e.data.country:t.$valid},e.updateCountry=function(){return i.address({country:e.data.country}).done()},e.setPaymentMethod=function(t){e.paymentMethod.value=t,e.validation.errorFields={},e.genericError=""};var c=function(t,o,c){if(o&&(a=o),e.validation.errorFields={},null==t){var u={_csrf:window.csrfToken,recurly_token_id:a.id,recurly_three_d_secure_action_result_token_id:c&&c.id,subscriptionDetails:{currencyCode:i.items.currency,plan_code:i.items.plan.code,coupon_code:i.items.coupon?i.items.coupon.code:"",first_name:e.data.first_name,last_name:e.data.last_name,isPaypal:"paypal"===e.paymentMethod.value,address:{address1:e.data.address1,address2:e.data.address2,country:e.data.country,state:e.data.state,postal_code:e.data.postal_code},ITMCampaign:window.ITMCampaign,ITMContent:window.ITMContent}};return r.sendMB("subscription-form-submitted",{currencyCode:u.subscriptionDetails.currencyCode,plan_code:u.subscriptionDetails.plan_code,coupon_code:u.subscriptionDetails.coupon_code,isPaypal:u.subscriptionDetails.isPaypal}),r.send("subscription-funnel","subscription-form-submitted",u.subscriptionDetails.plan_code),n.post("/user/subscription/create",u).then((function(){r.sendMB("subscription-submission-success"),r.send("subscription-funnel","subscription-submission-success",u.subscriptionDetails.plan_code),window.location.href="/user/subscription/thank-you"})).catch((function(t){e.processing=!1;var n=t.data;e.genericError=n&&n.message||"Something went wrong processing the request",n.threeDSecureActionTokenId&&s(n.threeDSecureActionTokenId)}))}r.sendMB("subscription-error",t),r.send("subscription-funnel","subscription-error"),e.$evalAsync((function(){e.processing=!1,e.genericError=t.message,_.each(t.fields,(function(t){return e.validation.errorFields[t]=!0}))}))};e.submit=function(){if(e.processing=!0,"paypal"===e.paymentMethod.value){var t={description:e.planName};return recurly.paypal(t,c)}return recurly.token(e.data,c)};var s=function(t){var n=recurly.Risk().ThreeDSecure({actionTokenId:t});n.on("error",(function(t){e.genericError="Error: ".concat(t.message),e.threeDSecureFlow=!1,e.$apply()})),n.on("token",(function(t){c(null,null,t),e.genericError=null,e.threeDSecureFlow=!1,e.processing=!0,e.$apply()})),e.threeDSecureRecurlyContainer.innerHTML="",e.threeDSecureFlow=!0,n.attach(e.threeDSecureRecurlyContainer),window.setTimeout((function(){e.threeDSecureContainer.scrollIntoView()}),0)};e.countries=[{code:"AF",name:"Afghanistan"},{code:"AX",name:"Åland Islands"},{code:"AL",name:"Albania"},{code:"DZ",name:"Algeria"},{code:"AS",name:"American Samoa"},{code:"AD",name:"Andorra"},{code:"AO",name:"Angola"},{code:"AI",name:"Anguilla"},{code:"AQ",name:"Antarctica"},{code:"AG",name:"Antigua and Barbuda"},{code:"AR",name:"Argentina"},{code:"AM",name:"Armenia"},{code:"AW",name:"Aruba"},{code:"AC",name:"Ascension Island"},{code:"AU",name:"Australia"},{code:"AT",name:"Austria"},{code:"AZ",name:"Azerbaijan"},{code:"BS",name:"Bahamas"},{code:"BH",name:"Bahrain"},{code:"BD",name:"Bangladesh"},{code:"BB",name:"Barbados"},{code:"BY",name:"Belarus"},{code:"BE",name:"Belgium"},{code:"BZ",name:"Belize"},{code:"BJ",name:"Benin"},{code:"BM",name:"Bermuda"},{code:"BT",name:"Bhutan"},{code:"BO",name:"Bolivia"},{code:"BA",name:"Bosnia and Herzegovina"},{code:"BW",name:"Botswana"},{code:"BV",name:"Bouvet Island"},{code:"BR",name:"Brazil"},{code:"BQ",name:"British Antarctic Territory"},{code:"IO",name:"British Indian Ocean Territory"},{code:"VG",name:"British Virgin Islands"},{code:"BN",name:"Brunei"},{code:"BG",name:"Bulgaria"},{code:"BF",name:"Burkina Faso"},{code:"BI",name:"Burundi"},{code:"CV",name:"Cabo Verde"},{code:"KH",name:"Cambodia"},{code:"CM",name:"Cameroon"},{code:"CA",name:"Canada"},{code:"IC",name:"Canary Islands"},{code:"CT",name:"Canton and Enderbury Islands"},{code:"KY",name:"Cayman Islands"},{code:"CF",name:"Central African Republic"},{code:"EA",name:"Ceuta and Melilla"},{code:"TD",name:"Chad"},{code:"CL",name:"Chile"},{code:"CN",name:"China"},{code:"CX",name:"Christmas Island"},{code:"CP",name:"Clipperton Island"},{code:"CC",name:"Cocos [Keeling] Islands"},{code:"CO",name:"Colombia"},{code:"KM",name:"Comoros"},{code:"CG",name:"Congo - Brazzaville"},{code:"CD",name:"Congo - Kinshasa"},{code:"CD",name:"Congo [DRC]"},{code:"CG",name:"Congo [Republic]"},{code:"CK",name:"Cook Islands"},{code:"CR",name:"Costa Rica"},{code:"CI",name:"Côte d’Ivoire"},{code:"HR",name:"Croatia"},{code:"CU",name:"Cuba"},{code:"CY",name:"Cyprus"},{code:"CZ",name:"Czech Republic"},{code:"DK",name:"Denmark"},{code:"DG",name:"Diego Garcia"},{code:"DJ",name:"Djibouti"},{code:"DM",name:"Dominica"},{code:"DO",name:"Dominican Republic"},{code:"NQ",name:"Dronning Maud Land"},{code:"TL",name:"East Timor"},{code:"EC",name:"Ecuador"},{code:"EG",name:"Egypt"},{code:"SV",name:"El Salvador"},{code:"GQ",name:"Equatorial Guinea"},{code:"ER",name:"Eritrea"},{code:"EE",name:"Estonia"},{code:"ET",name:"Ethiopia"},{code:"FK",name:"Falkland Islands [Islas Malvinas]"},{code:"FK",name:"Falkland Islands"},{code:"FO",name:"Faroe Islands"},{code:"FJ",name:"Fiji"},{code:"FI",name:"Finland"},{code:"FR",name:"France"},{code:"GF",name:"French Guiana"},{code:"PF",name:"French Polynesia"},{code:"FQ",name:"French Southern and Antarctic Territories"},{code:"TF",name:"French Southern Territories"},{code:"GA",name:"Gabon"},{code:"GM",name:"Gambia"},{code:"GE",name:"Georgia"},{code:"DE",name:"Germany"},{code:"GH",name:"Ghana"},{code:"GI",name:"Gibraltar"},{code:"GR",name:"Greece"},{code:"GL",name:"Greenland"},{code:"GD",name:"Grenada"},{code:"GP",name:"Guadeloupe"},{code:"GU",name:"Guam"},{code:"GT",name:"Guatemala"},{code:"GG",name:"Guernsey"},{code:"GW",name:"Guinea-Bissau"},{code:"GN",name:"Guinea"},{code:"GY",name:"Guyana"},{code:"HT",name:"Haiti"},{code:"HM",name:"Heard Island and McDonald Islands"},{code:"HN",name:"Honduras"},{code:"HK",name:"Hong Kong"},{code:"HU",name:"Hungary"},{code:"IS",name:"Iceland"},{code:"IN",name:"India"},{code:"ID",name:"Indonesia"},{code:"IR",name:"Iran"},{code:"IQ",name:"Iraq"},{code:"IE",name:"Ireland"},{code:"IM",name:"Isle of Man"},{code:"IL",name:"Israel"},{code:"IT",name:"Italy"},{code:"CI",name:"Ivory Coast"},{code:"JM",name:"Jamaica"},{code:"JP",name:"Japan"},{code:"JE",name:"Jersey"},{code:"JT",name:"Johnston Island"},{code:"JO",name:"Jordan"},{code:"KZ",name:"Kazakhstan"},{code:"KE",name:"Kenya"},{code:"KI",name:"Kiribati"},{code:"KW",name:"Kuwait"},{code:"KG",name:"Kyrgyzstan"},{code:"LA",name:"Laos"},{code:"LV",name:"Latvia"},{code:"LB",name:"Lebanon"},{code:"LS",name:"Lesotho"},{code:"LR",name:"Liberia"},{code:"LY",name:"Libya"},{code:"LI",name:"Liechtenstein"},{code:"LT",name:"Lithuania"},{code:"LU",name:"Luxembourg"},{code:"MO",name:"Macau SAR China"},{code:"MO",name:"Macau"},{code:"MK",name:"Macedonia [FYROM]"},{code:"MK",name:"Macedonia"},{code:"MG",name:"Madagascar"},{code:"MW",name:"Malawi"},{code:"MY",name:"Malaysia"},{code:"MV",name:"Maldives"},{code:"ML",name:"Mali"},{code:"MT",name:"Malta"},{code:"MH",name:"Marshall Islands"},{code:"MQ",name:"Martinique"},{code:"MR",name:"Mauritania"},{code:"MU",name:"Mauritius"},{code:"YT",name:"Mayotte"},{code:"FX",name:"Metropolitan France"},{code:"MX",name:"Mexico"},{code:"FM",name:"Micronesia"},{code:"MI",name:"Midway Islands"},{code:"MD",name:"Moldova"},{code:"MC",name:"Monaco"},{code:"MN",name:"Mongolia"},{code:"ME",name:"Montenegro"},{code:"MS",name:"Montserrat"},{code:"MA",name:"Morocco"},{code:"MZ",name:"Mozambique"},{code:"MM",name:"Myanmar [Burma]"},{code:"NA",name:"Namibia"},{code:"NR",name:"Nauru"},{code:"NP",name:"Nepal"},{code:"AN",name:"Netherlands Antilles"},{code:"NL",name:"Netherlands"},{code:"NC",name:"New Caledonia"},{code:"NZ",name:"New Zealand"},{code:"NI",name:"Nicaragua"},{code:"NE",name:"Niger"},{code:"NG",name:"Nigeria"},{code:"NU",name:"Niue"},{code:"NF",name:"Norfolk Island"},{code:"KP",name:"North Korea"},{code:"VD",name:"North Vietnam"},{code:"MP",name:"Northern Mariana Islands"},{code:"NO",name:"Norway"},{code:"OM",name:"Oman"},{code:"QO",name:"Outlying Oceania"},{code:"PC",name:"Pacific Islands Trust Territory"},{code:"PK",name:"Pakistan"},{code:"PW",name:"Palau"},{code:"PS",name:"Palestinian Territories"},{code:"PZ",name:"Panama Canal Zone"},{code:"PA",name:"Panama"},{code:"PG",name:"Papua New Guinea"},{code:"PY",name:"Paraguay"},{code:"YD",name:"People's Democratic Republic of Yemen"},{code:"PE",name:"Peru"},{code:"PH",name:"Philippines"},{code:"PN",name:"Pitcairn Islands"},{code:"PL",name:"Poland"},{code:"PT",name:"Portugal"},{code:"PR",name:"Puerto Rico"},{code:"QA",name:"Qatar"},{code:"RE",name:"Réunion"},{code:"RO",name:"Romania"},{code:"RU",name:"Russia"},{code:"RW",name:"Rwanda"},{code:"BL",name:"Saint Barthélemy"},{code:"SH",name:"Saint Helena"},{code:"KN",name:"Saint Kitts and Nevis"},{code:"LC",name:"Saint Lucia"},{code:"MF",name:"Saint Martin"},{code:"PM",name:"Saint Pierre and Miquelon"},{code:"VC",name:"Saint Vincent and the Grenadines"},{code:"WS",name:"Samoa"},{code:"SM",name:"San Marino"},{code:"ST",name:"São Tomé and Príncipe"},{code:"SA",name:"Saudi Arabia"},{code:"SN",name:"Senegal"},{code:"CS",name:"Serbia and Montenegro"},{code:"RS",name:"Serbia"},{code:"SC",name:"Seychelles"},{code:"SL",name:"Sierra Leone"},{code:"SG",name:"Singapore"},{code:"SK",name:"Slovakia"},{code:"SI",name:"Slovenia"},{code:"SB",name:"Solomon Islands"},{code:"SO",name:"Somalia"},{code:"ZA",name:"South Africa"},{code:"GS",name:"South Georgia and the South Sandwich Islands"},{code:"KR",name:"South Korea"},{code:"ES",name:"Spain"},{code:"LK",name:"Sri Lanka"},{code:"SD",name:"Sudan"},{code:"SR",name:"Suriname"},{code:"SJ",name:"Svalbard and Jan Mayen"},{code:"SZ",name:"Swaziland"},{code:"SE",name:"Sweden"},{code:"CH",name:"Switzerland"},{code:"SY",name:"Syria"},{code:"TW",name:"Taiwan"},{code:"TJ",name:"Tajikistan"},{code:"TZ",name:"Tanzania"},{code:"TH",name:"Thailand"},{code:"TL",name:"Timor-Leste"},{code:"TG",name:"Togo"},{code:"TK",name:"Tokelau"},{code:"TO",name:"Tonga"},{code:"TT",name:"Trinidad and Tobago"},{code:"TA",name:"Tristan da Cunha"},{code:"TN",name:"Tunisia"},{code:"TR",name:"Turkey"},{code:"TM",name:"Turkmenistan"},{code:"TC",name:"Turks and Caicos Islands"},{code:"TV",name:"Tuvalu"},{code:"UM",name:"U.S. Minor Outlying Islands"},{code:"PU",name:"U.S. Miscellaneous Pacific Islands"},{code:"VI",name:"U.S. Virgin Islands"},{code:"UG",name:"Uganda"},{code:"UA",name:"Ukraine"},{code:"AE",name:"United Arab Emirates"},{code:"GB",name:"United Kingdom"},{code:"US",name:"United States"},{code:"UY",name:"Uruguay"},{code:"UZ",name:"Uzbekistan"},{code:"VU",name:"Vanuatu"},{code:"VA",name:"Vatican City"},{code:"VE",name:"Venezuela"},{code:"VN",name:"Vietnam"},{code:"WK",name:"Wake Island"},{code:"WF",name:"Wallis and Futuna"},{code:"EH",name:"Western Sahara"},{code:"YE",name:"Yemen"},{code:"ZM",name:"Zambia"},{code:"ZW",name:"Zimbabwe"}]}else e.recurlyLoadError=!0}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.controller("AnnualUpgradeController",["$scope","$http","$modal",function(e,t,n){e.upgradeComplete=!1;var r={student:"19.2",collaborator:"36"};return e.$watch(e.planName,(function(){if(e.yearlySaving=r[e.planName],"annual"===e.planName)return e.upgradeComplete=!0})),e.completeAnnualUpgrade=function(){var n={planName:e.planName,_csrf:window.csrfToken};return e.inflight=!0,t.post("/user/subscription/upgrade-annual",n).then((function(){return e.upgradeComplete=!0})).catch((function(){return console.log("something went wrong changing plan")}))}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.controller("RegisterUsersController",["$scope","queuedHttp",function(e,t){e.users=[],e.inputs={emails:""};return e.registerUsers=function(){var n=function(e){var t=e.split(/[\s,]+/);return t=_.map(t,(function(e){return e.trim()})),t=_.filter(t,(function(e){return-1!==e.indexOf("@")}))}(e.inputs.emails);return e.error=!1,Array.from(n).map((function(n){return t.post("/admin/register",{email:n,_csrf:window.csrfToken}).then((function(t){var n=t.data;return e.users.push(n),e.inputs.emails=""})).catch((function(){return e.error=!0}))}))}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.controller("TeamInviteController",["$scope","$http",function(e,t){return e.inflight=!1,hasIndividualRecurlySubscription?e.view="hasIndividualRecurlySubscription":e.view="teamInvite",e.keepPersonalSubscription=function(){return e.view="teamInvite"},e.cancelPersonalSubscription=function(){e.inflight=!0;var n=t.post("/user/subscription/cancel",{_csrf:window.csrfToken});return n.then((function(){return e.inflight=!1,e.view="teamInvite"})),n.catch((function(){e.inflight=!1,e.cancel_error=!0,console.log("the request failed")}))},e.joinTeam=function(){e.inflight=!0;var n=t.put("/subscription/invites/".concat(window.inviteToken,"/"),{_csrf:window.csrfToken});return n.then((function(t){var n=t.status;if(e.inflight=!1,e.view="inviteAccepted",200!==n)return e.requestSent=!1})),n.catch((function(){return console.log("the request failed")}))}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.controller("UpgradeSubscriptionController",["$scope","eventTracking",function(e,t){e.upgradeSubscription=function(){t.send("subscription-funnel","subscription-page","upgrade")}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.controller("GroupPlanContactController",["$scope","$modal","$http",function(e,t,n){return e.form={},e.sent=!1,e.sending=!1,e.error=!1,e.contactUs=function(){if(null!=e.form.email){e.sending=!0;Math.floor(65536*(1+Math.random())).toString(32);var t={_csrf:window.csrfToken,name:e.form.name||e.form.email,email:e.form.email,labels:"".concat(e.form.source," accounts"),message:"Please contact me with more details",subject:"".concat(e.form.name," - Group Enquiry - ").concat(e.form.position," - ").concat(e.form.university),inbox:"accounts"},r=n.post("/support",t);return r.catch((function(){return e.error=!0,e.$apply()})),r.then((function(t){return e.sent=!0,eventTracking.send("subscription-funnel","plans-page","group-inquiry-sent"),e.error=200!==t.status,e.$apply()}))}console.log("email not set")}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(51),n(187)],void 0===(o=function(e){return e.controller("SearchWikiController",["$scope","algoliaSearch","_","$modal",function(e,t,n,r){e.hits=[],e.hits_total=0,e.config_hits_per_page=20,e.processingSearch=!1,e.clearSearchText=function(){return e.searchQueryText="",a([])},e.safeApply=function(t){var n=e.$root.$$phase;return"$apply"===n||"$digest"===n?e.$eval(t):e.$apply(t)};var o=function(e){var t=e.kb?"how-to/":"latex/",n=encodeURIComponent(e.pageName.replace(/\s/g,"_")),r="";e.sectionName&&""!==e.sectionName&&(r="#"+e.sectionName.replace(/\s/g,"_"));var o=e._highlightResult.sectionName,a=e._highlightResult.pageName.value;o&&o.value&&""!==o&&(a+=" - "+o.value);for(var i=e._highlightResult.content.value,c=(i=i.replace(/\n\n+/g,"\n\n")).split("\n"),s=[],u=0,l=Array.from(c);u<l.length;u++){var d=l[u];/^\[edit\]/.test(d)||(i+=d+"\n",/<em>/.test(d)&&s.push(d))}return i=s.join("\n...\n"),{name:a,url:"/learn/".concat(t).concat(n).concat(r),content:i}},a=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.safeApply((function(){e.hits=t,e.hits_total=n}))};e.search=function(){e.processingSearch=!0;var r=e.searchQueryText;if(null!=r&&0!==r.length)return t.searchWiki(r,{hitsPerPage:e.config_hits_per_page},(function(t,r){if(e.processingSearch=!1,0===r.hits.length)return a([]);var i=n.map(r.hits,o);return a(i,r.nbHits)}));a([])}}]),e.controller("LearnController",(function(){}))}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;function a(e,t){return null!=e?t(e):void 0}r=[n(0),n(104)],void 0===(o=function(e,t){return e.factory("algoliaSearch",(function(){var e,n;if(null!=(null!=window.sharelatex?window.sharelatex.algolia:void 0)&&null!=a(null!=window.sharelatex.algolia?window.sharelatex.algolia.indexes:void 0,(function(e){return e.wiki}))){var r=t(null!=window.sharelatex.algolia?window.sharelatex.algolia.app_id:void 0,null!=window.sharelatex.algolia?window.sharelatex.algolia.api_key:void 0);n=r.initIndex(a(null!=window.sharelatex.algolia?window.sharelatex.algolia.indexes:void 0,(function(e){return e.wiki}))),e=r.initIndex(a(null!=window.sharelatex.algolia?window.sharelatex.algolia.indexes:void 0,(function(e){return e.kb})))}return{searchWiki:n?n.search.bind(n):null,searchKB:e?e.search.bind(e):null}}))}.apply(t,r))||(e.exports=o)},function(e,t,n){e.exports=u;var r=n(189),o=n(52),a=n(53),i=n(194),c=n(24),s=n(17);function u(){i.apply(this,arguments)}function l(){throw new s.AlgoliaSearchError("Not implemented in this environment.\nIf you feel this is a mistake, write to support@algolia.com")}c(u,i),u.prototype.deleteIndex=function(e,t){return this._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(e),hostType:"write",callback:t})},u.prototype.moveIndex=function(e,t,n){var r={operation:"move",destination:t};return this._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(e)+"/operation",body:r,hostType:"write",callback:n})},u.prototype.copyIndex=function(e,t,n,r){var o={operation:"copy",destination:t},a=r;if("function"==typeof n)a=n;else if(Array.isArray(n)&&n.length>0)o.scope=n;else if(void 0!==n)throw new Error("the scope given to `copyIndex` was not an array with settings, synonyms or rules");return this._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(e)+"/operation",body:o,hostType:"write",callback:a})},u.prototype.getLogs=function(e,t,r){var o=n(9),a={};return"object"==typeof e?(a=o(e),r=t):0===arguments.length||"function"==typeof e?r=e:1===arguments.length||"function"==typeof t?(r=t,a.offset=e):(a.offset=e,a.length=t),void 0===a.offset&&(a.offset=0),void 0===a.length&&(a.length=10),this._jsonRequest({method:"GET",url:"/1/logs?"+this._getSearchParams(a,""),hostType:"read",callback:r})},u.prototype.listIndexes=function(e,t){var n="";return void 0===e||"function"==typeof e?t=e:n="?page="+e,this._jsonRequest({method:"GET",url:"/1/indexes"+n,hostType:"read",callback:t})},u.prototype.initIndex=function(e){return new r(this,e)},u.prototype.initAnalytics=function(e){return n(198)(this.applicationID,this.apiKey,e)},u.prototype.listUserKeys=o((function(e){return this.listApiKeys(e)}),a("client.listUserKeys()","client.listApiKeys()")),u.prototype.listApiKeys=function(e){return this._jsonRequest({method:"GET",url:"/1/keys",hostType:"read",callback:e})},u.prototype.getUserKeyACL=o((function(e,t){return this.getApiKey(e,t)}),a("client.getUserKeyACL()","client.getApiKey()")),u.prototype.getApiKey=function(e,t){return this._jsonRequest({method:"GET",url:"/1/keys/"+e,hostType:"read",callback:t})},u.prototype.deleteUserKey=o((function(e,t){return this.deleteApiKey(e,t)}),a("client.deleteUserKey()","client.deleteApiKey()")),u.prototype.deleteApiKey=function(e,t){return this._jsonRequest({method:"DELETE",url:"/1/keys/"+e,hostType:"write",callback:t})},u.prototype.restoreApiKey=function(e,t){return this._jsonRequest({method:"POST",url:"/1/keys/"+e+"/restore",hostType:"write",callback:t})},u.prototype.addUserKey=o((function(e,t,n){return this.addApiKey(e,t,n)}),a("client.addUserKey()","client.addApiKey()")),u.prototype.addApiKey=function(e,t,r){var o=n(1),a="Usage: client.addApiKey(arrayOfAcls[, params, callback])";if(!o(e))throw new Error(a);1!==arguments.length&&"function"!=typeof t||(r=t,t=null);var i={acl:e};return t&&(i.validity=t.validity,i.maxQueriesPerIPPerHour=t.maxQueriesPerIPPerHour,i.maxHitsPerQuery=t.maxHitsPerQuery,i.indexes=t.indexes,i.description=t.description,t.queryParameters&&(i.queryParameters=this._getSearchParams(t.queryParameters,"")),i.referers=t.referers),this._jsonRequest({method:"POST",url:"/1/keys",body:i,hostType:"write",callback:r})},u.prototype.addUserKeyWithValidity=o((function(e,t,n){return this.addApiKey(e,t,n)}),a("client.addUserKeyWithValidity()","client.addApiKey()")),u.prototype.updateUserKey=o((function(e,t,n,r){return this.updateApiKey(e,t,n,r)}),a("client.updateUserKey()","client.updateApiKey()")),u.prototype.updateApiKey=function(e,t,r,o){var a=n(1),i="Usage: client.updateApiKey(key, arrayOfAcls[, params, callback])";if(!a(t))throw new Error(i);2!==arguments.length&&"function"!=typeof r||(o=r,r=null);var c={acl:t};return r&&(c.validity=r.validity,c.maxQueriesPerIPPerHour=r.maxQueriesPerIPPerHour,c.maxHitsPerQuery=r.maxHitsPerQuery,c.indexes=r.indexes,c.description=r.description,r.queryParameters&&(c.queryParameters=this._getSearchParams(r.queryParameters,"")),c.referers=r.referers),this._jsonRequest({method:"PUT",url:"/1/keys/"+e,body:c,hostType:"write",callback:o})},u.prototype.startQueriesBatch=o((function(){this._batch=[]}),a("client.startQueriesBatch()","client.search()")),u.prototype.addQueryInBatch=o((function(e,t,n){this._batch.push({indexName:e,query:t,params:n})}),a("client.addQueryInBatch()","client.search()")),u.prototype.sendQueriesBatch=o((function(e){return this.search(this._batch,e)}),a("client.sendQueriesBatch()","client.search()")),u.prototype.batch=function(e,t){if(!n(1)(e))throw new Error("Usage: client.batch(operations[, callback])");return this._jsonRequest({method:"POST",url:"/1/indexes/*/batch",body:{requests:e},hostType:"write",callback:t})},u.prototype.assignUserID=function(e,t){if(!e.userID||!e.cluster)throw new s.AlgoliaSearchError("You have to provide both a userID and cluster",e);return this._jsonRequest({method:"POST",url:"/1/clusters/mapping",hostType:"write",body:{cluster:e.cluster},callback:t,headers:{"x-algolia-user-id":e.userID}})},u.prototype.assignUserIDs=function(e,t){if(!e.userIDs||!e.cluster)throw new s.AlgoliaSearchError("You have to provide both an array of userIDs and cluster",e);return this._jsonRequest({method:"POST",url:"/1/clusters/mapping/batch",hostType:"write",body:{cluster:e.cluster,users:e.userIDs},callback:t})},u.prototype.getTopUserID=function(e){return this._jsonRequest({method:"GET",url:"/1/clusters/mapping/top",hostType:"read",callback:e})},u.prototype.getUserID=function(e,t){if(!e.userID)throw new s.AlgoliaSearchError("You have to provide a userID",{debugData:e});return this._jsonRequest({method:"GET",url:"/1/clusters/mapping/"+e.userID,hostType:"read",callback:t})},u.prototype.listClusters=function(e){return this._jsonRequest({method:"GET",url:"/1/clusters",hostType:"read",callback:e})},u.prototype.listUserIDs=function(e,t){return this._jsonRequest({method:"GET",url:"/1/clusters/mapping",body:e,hostType:"read",callback:t})},u.prototype.removeUserID=function(e,t){if(!e.userID)throw new s.AlgoliaSearchError("You have to provide a userID",{debugData:e});return this._jsonRequest({method:"DELETE",url:"/1/clusters/mapping",hostType:"write",callback:t,headers:{"x-algolia-user-id":e.userID}})},u.prototype.searchUserIDs=function(e,t){return this._jsonRequest({method:"POST",url:"/1/clusters/mapping/search",body:e,hostType:"read",callback:t})},u.prototype.setPersonalizationStrategy=function(e,t){return this._jsonRequest({method:"POST",url:"/1/recommendation/personalization/strategy",body:e,hostType:"write",callback:t})},u.prototype.getPersonalizationStrategy=function(e){return this._jsonRequest({method:"GET",url:"/1/recommendation/personalization/strategy",hostType:"read",callback:e})},u.prototype.destroy=l,u.prototype.enableRateLimitForward=l,u.prototype.disableRateLimitForward=l,u.prototype.useSecuredAPIKey=l,u.prototype.disableSecuredAPIKey=l,u.prototype.generateSecuredApiKey=l,u.prototype.getSecuredApiKeyRemainingValidity=l},function(e,t,n){var r=n(24),o=n(105),a=n(52),i=n(53),c=n(109),s=n(17),u=a((function(){}),i("forwardToSlaves","forwardToReplicas"));function l(){o.apply(this,arguments)}function d(e,t,n){return function n(r,o){var a={page:r||0,hitsPerPage:t||100},i=o||[];return e(a).then((function(e){var t=e.hits,r=e.nbHits,o=t.map((function(e){return delete e._highlightResult,e})),c=i.concat(o);return c.length<r?n(a.page+1,c):c}))}().then((function(e){if("function"!=typeof n)return e;n(e)}))}e.exports=l,r(l,o),l.prototype.addObject=function(e,t,n){var r=this;return 1!==arguments.length&&"function"!=typeof t||(n=t,t=void 0),this.as._jsonRequest({method:void 0!==t?"PUT":"POST",url:"/1/indexes/"+encodeURIComponent(r.indexName)+(void 0!==t?"/"+encodeURIComponent(t):""),body:e,hostType:"write",callback:n})},l.prototype.addObjects=function(e,t){if(!n(1)(e))throw new Error("Usage: index.addObjects(arrayOfObjects[, callback])");for(var r={requests:[]},o=0;o<e.length;++o){var a={action:"addObject",body:e[o]};r.requests.push(a)}return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/batch",body:r,hostType:"write",callback:t})},l.prototype.partialUpdateObject=function(e,t,n){1!==arguments.length&&"function"!=typeof t||(n=t,t=void 0);var r=this,o="/1/indexes/"+encodeURIComponent(r.indexName)+"/"+encodeURIComponent(e.objectID)+"/partial";return!1===t&&(o+="?createIfNotExists=false"),this.as._jsonRequest({method:"POST",url:o,body:e,hostType:"write",callback:n})},l.prototype.partialUpdateObjects=function(e,t,r){1!==arguments.length&&"function"!=typeof t||(r=t,t=!0);var o=n(1),a="Usage: index.partialUpdateObjects(arrayOfObjects[, callback])";if(!o(e))throw new Error(a);for(var i=this,c={requests:[]},s=0;s<e.length;++s){var u={action:!0===t?"partialUpdateObject":"partialUpdateObjectNoCreate",objectID:e[s].objectID,body:e[s]};c.requests.push(u)}return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(i.indexName)+"/batch",body:c,hostType:"write",callback:r})},l.prototype.saveObject=function(e,t){return this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/"+encodeURIComponent(e.objectID),body:e,hostType:"write",callback:t})},l.prototype.saveObjects=function(e,t){if(!n(1)(e))throw new Error("Usage: index.saveObjects(arrayOfObjects[, callback])");for(var r={requests:[]},o=0;o<e.length;++o){var a={action:"updateObject",objectID:e[o].objectID,body:e[o]};r.requests.push(a)}return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/batch",body:r,hostType:"write",callback:t})},l.prototype.deleteObject=function(e,t){if("function"==typeof e||"string"!=typeof e&&"number"!=typeof e){var n=new s.AlgoliaSearchError(e&&"function"!=typeof e?"ObjectID must be a string":"Cannot delete an object without an objectID");return"function"==typeof(t=e)?t(n):this.as._promise.reject(n)}return this.as._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/"+encodeURIComponent(e),hostType:"write",callback:t})},l.prototype.deleteObjects=function(e,t){var r=n(1),o=n(19);if(!r(e))throw new Error("Usage: index.deleteObjects(arrayOfObjectIDs[, callback])");var a={requests:o(e,(function(e){return{action:"deleteObject",objectID:e,body:{objectID:e}}}))};return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/batch",body:a,hostType:"write",callback:t})},l.prototype.deleteByQuery=a((function(e,t,r){var o=n(9),a=n(19),i=this,s=i.as;1===arguments.length||"function"==typeof t?(r=t,t={}):t=o(t),t.attributesToRetrieve="objectID",t.hitsPerPage=1e3,t.distinct=!1,this.clearCache();var u=this.search(e,t).then(l);function l(e){if(0===e.nbHits)return e;var t=a(e.hits,(function(e){return e.objectID}));return i.deleteObjects(t).then(d).then(p)}function d(e){return i.waitTask(e.taskID)}function p(){return i.deleteByQuery(e,t)}if(!r)return u;function f(){c((function(){r(null)}),s._setTimeout||setTimeout)}function m(e){c((function(){r(e)}),s._setTimeout||setTimeout)}u.then(f,m)}),i("index.deleteByQuery()","index.deleteBy()")),l.prototype.deleteBy=function(e,t){return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/deleteByQuery",body:{params:this.as._getSearchParams(e,"")},hostType:"write",callback:t})},l.prototype.browseAll=function(e,t){"object"==typeof e&&(t=e,e=void 0);var r=n(107),o=new(n(192)),a=this.as,i=this,c=a._getSearchParams(r({},t||{},{query:e}),"");function s(e){var t;o._stopped||(t=void 0!==e?{cursor:e}:{params:c},a._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(i.indexName)+"/browse",hostType:"read",body:t,callback:u}))}function u(e,t){o._stopped||(e?o._error(e):(o._result(t),void 0!==t.cursor?s(t.cursor):o._end()))}return(s(),o)},l.prototype.ttAdapter=a((function(e){var t=this;return function(n,r,o){var a;a="function"==typeof o?o:r,t.search(n,e,(function(e,t){a(e||t.hits)}))}}),"ttAdapter is not necessary anymore and will be removed in the next version,\nhave a look at autocomplete.js (https://github.com/algolia/autocomplete.js)"),l.prototype.waitTask=function(e,t){var n=100,r=5e3,o=0,a=this,i=a.as,s=function t(){return i._jsonRequest({method:"GET",hostType:"read",url:"/1/indexes/"+encodeURIComponent(a.indexName)+"/task/"+e}).then((function(e){o++;var a=n*o*o;return a>r&&(a=r),"published"!==e.status?i._promise.delay(a).then(t):e}))}();if(!t)return s;s.then((function(e){c((function(){t(null,e)}),i._setTimeout||setTimeout)}),(function(e){c((function(){t(e)}),i._setTimeout||setTimeout)}))},l.prototype.clearIndex=function(e){return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/clear",hostType:"write",callback:e})},l.prototype.getSettings=function(e,t){1===arguments.length&&"function"==typeof e&&(t=e,e={}),e=e||{};var n=encodeURIComponent(this.indexName);return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+n+"/settings?getVersion=2"+(e.advanced?"&advanced="+e.advanced:""),hostType:"read",callback:t})},l.prototype.searchSynonyms=function(e,t){return"function"==typeof e?(t=e,e={}):void 0===e&&(e={}),this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/synonyms/search",body:e,hostType:"read",callback:t})},l.prototype.exportSynonyms=function(e,t){return d(this.searchSynonyms.bind(this),e,t)},l.prototype.saveSynonym=function(e,t,n){"function"==typeof t?(n=t,t={}):void 0===t&&(t={}),void 0!==t.forwardToSlaves&&u();var r=t.forwardToSlaves||t.forwardToReplicas?"true":"false";return this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/synonyms/"+encodeURIComponent(e.objectID)+"?forwardToReplicas="+r,body:e,hostType:"write",callback:n})},l.prototype.getSynonym=function(e,t){return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/synonyms/"+encodeURIComponent(e),hostType:"read",callback:t})},l.prototype.deleteSynonym=function(e,t,n){"function"==typeof t?(n=t,t={}):void 0===t&&(t={}),void 0!==t.forwardToSlaves&&u();var r=t.forwardToSlaves||t.forwardToReplicas?"true":"false";return this.as._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/synonyms/"+encodeURIComponent(e)+"?forwardToReplicas="+r,hostType:"write",callback:n})},l.prototype.clearSynonyms=function(e,t){"function"==typeof e?(t=e,e={}):void 0===e&&(e={}),void 0!==e.forwardToSlaves&&u();var n=e.forwardToSlaves||e.forwardToReplicas?"true":"false";return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/synonyms/clear?forwardToReplicas="+n,hostType:"write",callback:t})},l.prototype.batchSynonyms=function(e,t,n){"function"==typeof t?(n=t,t={}):void 0===t&&(t={}),void 0!==t.forwardToSlaves&&u();var r=t.forwardToSlaves||t.forwardToReplicas?"true":"false";return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/synonyms/batch?forwardToReplicas="+r+"&replaceExistingSynonyms="+(t.replaceExistingSynonyms?"true":"false"),hostType:"write",body:e,callback:n})},l.prototype.searchRules=function(e,t){return"function"==typeof e?(t=e,e={}):void 0===e&&(e={}),this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/rules/search",body:e,hostType:"read",callback:t})},l.prototype.exportRules=function(e,t){return d(this.searchRules.bind(this),e,t)},l.prototype.saveRule=function(e,t,n){if("function"==typeof t?(n=t,t={}):void 0===t&&(t={}),!e.objectID)throw new s.AlgoliaSearchError("Missing or empty objectID field for rule");var r=!0===t.forwardToReplicas?"true":"false";return this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/rules/"+encodeURIComponent(e.objectID)+"?forwardToReplicas="+r,body:e,hostType:"write",callback:n})},l.prototype.getRule=function(e,t){return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/rules/"+encodeURIComponent(e),hostType:"read",callback:t})},l.prototype.deleteRule=function(e,t,n){"function"==typeof t?(n=t,t={}):void 0===t&&(t={});var r=!0===t.forwardToReplicas?"true":"false";return this.as._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/rules/"+encodeURIComponent(e)+"?forwardToReplicas="+r,hostType:"write",callback:n})},l.prototype.clearRules=function(e,t){"function"==typeof e?(t=e,e={}):void 0===e&&(e={});var n=!0===e.forwardToReplicas?"true":"false";return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/rules/clear?forwardToReplicas="+n,hostType:"write",callback:t})},l.prototype.batchRules=function(e,t,n){"function"==typeof t?(n=t,t={}):void 0===t&&(t={});var r=!0===t.forwardToReplicas?"true":"false";return this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/rules/batch?forwardToReplicas="+r+"&clearExistingRules="+(!0===t.clearExistingRules?"true":"false"),hostType:"write",body:e,callback:n})},l.prototype.exists=function(e){var t=this.getSettings().then((function(){return!0})).catch((function(e){if(e instanceof s.AlgoliaSearchError&&404===e.statusCode)return!1;throw e}));if("function"!=typeof e)return t;t.then((function(t){e(null,t)})).catch((function(t){e(t)}))},l.prototype.findObject=function(e,t,n){var r=void 0===(t=void 0===t?{}:t).paginate||t.paginate,o=void 0!==t.query?t.query:"",a=this,i=0,c=function(){return t.page=i,a.search(o,t).then((function(t){for(var n=t.hits,o=0;o<n.length;o++){var a=n[o];if(e(a))return{object:a,position:o,page:i}}if(i+=1,!r||i>=t.nbPages)throw new s.ObjectNotFound("Object not found");return c()}))},u=c(i);if(void 0===n)return u;u.then((function(e){n(null,e)})).catch((function(e){n(e)}))},l.prototype.getObjectPosition=function(e,t){for(var n=e.hits,r=0;r<n.length;r++)if(n[r].objectID===t)return r;return-1},l.prototype.setSettings=function(e,t,n){1!==arguments.length&&"function"!=typeof t||(n=t,t={}),void 0!==t.forwardToSlaves&&u();var r=t.forwardToSlaves||t.forwardToReplicas?"true":"false",o=this;return this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(o.indexName)+"/settings?forwardToReplicas="+r,hostType:"write",body:e,callback:n})},l.prototype.listUserKeys=a((function(e){return this.listApiKeys(e)}),i("index.listUserKeys()","client.listApiKeys()")),l.prototype.listApiKeys=a((function(e){return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/keys",hostType:"read",callback:e})}),i("index.listApiKeys()","client.listApiKeys()")),l.prototype.getUserKeyACL=a((function(e,t){return this.getApiKey(e,t)}),i("index.getUserKeyACL()","client.getApiKey()")),l.prototype.getApiKey=a((function(e,t){return this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/keys/"+e,hostType:"read",callback:t})}),i("index.getApiKey()","client.getApiKey()")),l.prototype.deleteUserKey=a((function(e,t){return this.deleteApiKey(e,t)}),i("index.deleteUserKey()","client.deleteApiKey()")),l.prototype.deleteApiKey=a((function(e,t){return this.as._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/keys/"+e,hostType:"write",callback:t})}),i("index.deleteApiKey()","client.deleteApiKey()")),l.prototype.addUserKey=a((function(e,t,n){return this.addApiKey(e,t,n)}),i("index.addUserKey()","client.addApiKey()")),l.prototype.addApiKey=a((function(e,t,r){var o=n(1),a="Usage: index.addApiKey(arrayOfAcls[, params, callback])";if(!o(e))throw new Error(a);1!==arguments.length&&"function"!=typeof t||(r=t,t=null);var i={acl:e};return t&&(i.validity=t.validity,i.maxQueriesPerIPPerHour=t.maxQueriesPerIPPerHour,i.maxHitsPerQuery=t.maxHitsPerQuery,i.description=t.description,t.queryParameters&&(i.queryParameters=this.as._getSearchParams(t.queryParameters,"")),i.referers=t.referers),this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/keys",body:i,hostType:"write",callback:r})}),i("index.addApiKey()","client.addApiKey()")),l.prototype.addUserKeyWithValidity=a((function(e,t,n){return this.addApiKey(e,t,n)}),i("index.addUserKeyWithValidity()","client.addApiKey()")),l.prototype.updateUserKey=a((function(e,t,n,r){return this.updateApiKey(e,t,n,r)}),i("index.updateUserKey()","client.updateApiKey()")),l.prototype.updateApiKey=a((function(e,t,r,o){var a=n(1),i="Usage: index.updateApiKey(key, arrayOfAcls[, params, callback])";if(!a(t))throw new Error(i);2!==arguments.length&&"function"!=typeof r||(o=r,r=null);var c={acl:t};return r&&(c.validity=r.validity,c.maxQueriesPerIPPerHour=r.maxQueriesPerIPPerHour,c.maxHitsPerQuery=r.maxHitsPerQuery,c.description=r.description,r.queryParameters&&(c.queryParameters=this.as._getSearchParams(r.queryParameters,"")),c.referers=r.referers),this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/keys/"+e,body:c,hostType:"write",callback:o})}),i("index.updateApiKey()","client.updateApiKey()"))},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=Array.prototype.slice,i=n(191),c=Object.prototype.propertyIsEnumerable,s=!c.call({toString:null},"toString"),u=c.call((function(){}),"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(e){var t=e.constructor;return t&&t.prototype===e},p={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!p["$"+e]&&r.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{d(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),m=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===o.call(e),a=i(e),c=t&&"[object String]"===o.call(e),p=[];if(!t&&!n&&!a)throw new TypeError("Object.keys called on a non-object");var m=u&&n;if(c&&e.length>0&&!r.call(e,0))for(var h=0;h<e.length;++h)p.push(String(h));if(a&&e.length>0)for(var y=0;y<e.length;++y)p.push(String(y));else for(var g in e)m&&"prototype"===g||!r.call(e,g)||p.push(String(g));if(s)for(var v=function(e){if("undefined"==typeof window||!f)return d(e);try{return d(e)}catch(e){return!1}}(e),w=0;w<l.length;++w)v&&"constructor"===l[w]||!r.call(e,l[w])||p.push(l[w]);return p};m.shim=function(){if(Object.keys){if(!function(){return 2===(Object.keys(arguments)||"").length}(1,2)){var e=Object.keys;Object.keys=function(t){return i(t)?e(a.call(t)):e(t)}}}else Object.keys=m;return Object.keys||m},e.exports=m},function(e,t,n){"use strict";var r=Object.prototype.toString;e.exports=function(e){var t=r.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===r.call(e.callee)),n}},function(e,t,n){"use strict";function r(){}e.exports=r,n(24)(r,n(193).EventEmitter),r.prototype.stop=function(){this._stopped=!0,this._clean()},r.prototype._end=function(){this.emit("end"),this._clean()},r.prototype._error=function(e){this.emit("error",e),this._clean()},r.prototype._result=function(e){this.emit("result",e)},r.prototype._clean=function(){this.removeAllListeners("stop"),this.removeAllListeners("end"),this.removeAllListeners("error"),this.removeAllListeners("result")}},function(e,t,n){"use strict";var r,o="object"==typeof Reflect?Reflect:null,a=o&&"function"==typeof o.apply?o.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function c(){c.init.call(this)}e.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var s=10;function u(e){return void 0===e._maxListeners?c.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var o,a,i,c;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),i=a[t]),void 0===i)i=a[t]=n,++e._eventsCount;else if("function"==typeof i?i=a[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),(o=u(e))>0&&i.length>o&&!i.warned){i.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=i.length,c=s,console&&console.warn&&console.warn(c)}return e}function d(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,a(this.listener,this.target,e))}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=d.bind(r);return o.listener=n,r.wrapFn=o,o}function f(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):h(o,o.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},c.prototype.getMaxListeners=function(){return u(this)},c.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var c=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw c.context=i,c}var s=o[e];if(void 0===s)return!1;if("function"==typeof s)a(s,this,t);else{var u=s.length,l=h(s,u);for(n=0;n<u;++n)a(l[n],this,t)}return!0},c.prototype.addListener=function(e,t){return l(this,e,t,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(e,t){return l(this,e,t,!0)},c.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,p(this,e,t)),this},c.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,p(this,e,t)),this},c.prototype.removeListener=function(e,t){var n,r,o,a,i;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){i=n[a].listener,o=a;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,i||t)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(o=a[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},c.prototype.listeners=function(e){return f(this,e,!0)},c.prototype.rawListeners=function(e){return f(this,e,!1)},c.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},c.prototype.listenerCount=m,c.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){(function(t){e.exports=s;var r=n(17),o=n(109),a=n(105),i=n(195),c=t.env.RESET_APP_DATA_TIMER&&parseInt(t.env.RESET_APP_DATA_TIMER,10)||12e4;function s(e,t,o){var a=n(31)("algoliasearch"),i=n(9),c=n(1),s=n(19),l="Usage: algoliasearch(applicationID, apiKey, opts)";if(!0!==o._allowEmptyCredentials&&!e)throw new r.AlgoliaSearchError("Please provide an application ID. "+l);if(!0!==o._allowEmptyCredentials&&!t)throw new r.AlgoliaSearchError("Please provide an API key. "+l);this.applicationID=e,this.apiKey=t,this.hosts={read:[],write:[]},o=o||{},this._timeouts=o.timeouts||{connect:1e3,read:2e3,write:3e4},o.timeout&&(this._timeouts.connect=this._timeouts.read=this._timeouts.write=o.timeout);var d=o.protocol||"https:";if(/:$/.test(d)||(d+=":"),"http:"!==d&&"https:"!==d)throw new r.AlgoliaSearchError("protocol must be `http:` or `https:` (was `"+o.protocol+"`)");if(this._checkAppIdData(),o.hosts)c(o.hosts)?(this.hosts.read=i(o.hosts),this.hosts.write=i(o.hosts)):(this.hosts.read=i(o.hosts.read),this.hosts.write=i(o.hosts.write));else{var p=s(this._shuffleResult,(function(t){return e+"-"+t+".algolianet.com"})),f=(!1===o.dsn?"":"-dsn")+".algolia.net";this.hosts.read=[this.applicationID+f].concat(p),this.hosts.write=[this.applicationID+".algolia.net"].concat(p)}this.hosts.read=s(this.hosts.read,u(d)),this.hosts.write=s(this.hosts.write,u(d)),this.extraHeaders={},this.cache=o._cache||{},this._ua=o._ua,this._useCache=!(void 0!==o._useCache&&!o._cache)||o._useCache,this._useRequestCache=this._useCache&&o._useRequestCache,this._useFallback=void 0===o.useFallback||o.useFallback,this._setTimeout=o._setTimeout,a("init done, %j",this)}function u(e){return function(t){return e+"//"+t.toLowerCase()}}function l(e){if(void 0===Array.prototype.toJSON)return JSON.stringify(e);var t=Array.prototype.toJSON;delete Array.prototype.toJSON;var n=JSON.stringify(e);return Array.prototype.toJSON=t,n}function d(e){var t={};for(var n in e){var r;if(Object.prototype.hasOwnProperty.call(e,n))r="x-algolia-api-key"===n||"x-algolia-application-id"===n?"**hidden for security purposes**":e[n],t[n]=r}return t}s.prototype.initIndex=function(e){return new a(this,e)},s.prototype.setExtraHeader=function(e,t){this.extraHeaders[e.toLowerCase()]=t},s.prototype.getExtraHeader=function(e){return this.extraHeaders[e.toLowerCase()]},s.prototype.unsetExtraHeader=function(e){delete this.extraHeaders[e.toLowerCase()]},s.prototype.addAlgoliaAgent=function(e){var t="; "+e;-1===this._ua.indexOf(t)&&(this._ua+=t)},s.prototype._jsonRequest=function(e){this._checkAppIdData();var t,a,i,c=n(31)("algoliasearch:"+e.url),s=e.additionalUA||"",u=e.cache,p=this,f=0,m=!1,h=p._useFallback&&p._request.fallback&&e.fallback;this.apiKey.length>500&&void 0!==e.body&&(void 0!==e.body.params||void 0!==e.body.requests)?(e.body.apiKey=this.apiKey,i=this._computeRequestHeaders({additionalUA:s,withApiKey:!1,headers:e.headers})):i=this._computeRequestHeaders({additionalUA:s,headers:e.headers}),void 0!==e.body&&(t=l(e.body)),c("request start");var y=[];function g(e,t,n){return p._useCache&&e&&t&&void 0!==t[n]}function v(t,n){if(g(p._useRequestCache,u,a)&&t.catch((function(){delete u[a]})),"function"!=typeof e.callback)return t.then(n);t.then((function(t){o((function(){e.callback(null,n(t))}),p._setTimeout||setTimeout)}),(function(t){o((function(){e.callback(t)}),p._setTimeout||setTimeout)}))}if(p._useCache&&p._useRequestCache&&(a=e.url),p._useCache&&p._useRequestCache&&t&&(a+="_body_"+t),g(p._useRequestCache,u,a)){c("serving request from cache");var w=u[a];return v("function"!=typeof w.then?p._promise.resolve({responseText:w}):w,(function(e){return JSON.parse(e.responseText)}))}var b=function n(o,v){p._checkAppIdData();var w=new Date;if(p._useCache&&!p._useRequestCache&&(a=e.url),p._useCache&&!p._useRequestCache&&t&&(a+="_body_"+v.body),g(!p._useRequestCache,u,a)){c("serving response from cache");var b=u[a];return p._promise.resolve({body:JSON.parse(b),responseText:b})}if(f>=p.hosts[e.hostType].length)return!h||m?(c("could not get any response"),p._promise.reject(new r.AlgoliaSearchError("Cannot connect to the AlgoliaSearch API. Send an email to support@algolia.com to report and resolve the issue. Application id was: "+p.applicationID,{debugData:y}))):(c("switching to fallback"),f=0,v.method=e.fallback.method,v.url=e.fallback.url,v.jsonBody=e.fallback.body,v.jsonBody&&(v.body=l(v.jsonBody)),i=p._computeRequestHeaders({additionalUA:s,headers:e.headers}),v.timeouts=p._getTimeoutsForRequest(e.hostType),p._setHostIndexByType(0,e.hostType),m=!0,n(p._request.fallback,v));var T=p._getHostByType(e.hostType),S=T+v.url,_={body:v.body,jsonBody:v.jsonBody,method:v.method,headers:i,timeouts:v.timeouts,debug:c,forceAuthHeaders:v.forceAuthHeaders};return c("method: %s, url: %s, headers: %j, timeouts: %d",_.method,S,_.headers,_.timeouts),o===p._request.fallback&&c("using fallback"),o.call(p,S,_).then((function(e){var n=e&&e.body&&e.body.message&&e.body.status||e.statusCode||e&&e.body&&200;c("received response: statusCode: %s, computed statusCode: %d, headers: %j",e.statusCode,n,e.headers);var o=2===Math.floor(n/100),s=new Date;if(y.push({currentHost:T,headers:d(i),content:t||null,contentLength:void 0!==t?t.length:null,method:v.method,timeouts:v.timeouts,url:v.url,startTime:w,endTime:s,duration:s-w,statusCode:n}),o)return p._useCache&&!p._useRequestCache&&u&&(u[a]=e.responseText),{responseText:e.responseText,body:e.body};if(4!==Math.floor(n/100))return f+=1,C();c("unrecoverable error");var l=new r.AlgoliaSearchError(e.body&&e.body.message,{debugData:y,statusCode:n});return p._promise.reject(l)}),(function(a){c("error: %s, stack: %s",a.message,a.stack);var s=new Date;y.push({currentHost:T,headers:d(i),content:t||null,contentLength:void 0!==t?t.length:null,method:v.method,timeouts:v.timeouts,url:v.url,startTime:w,endTime:s,duration:s-w}),a instanceof r.AlgoliaSearchError||(a=new r.Unknown(a&&a.message,a));if(f+=1,a instanceof r.Unknown||a instanceof r.UnparsableJSON||f>=p.hosts[e.hostType].length&&(m||!h))return a.debugData=y,p._promise.reject(a);if(a instanceof r.RequestTimeout)return c("retrying request with higher timeout"),p._incrementHostIndex(e.hostType),p._incrementTimeoutMultipler(),v.timeouts=p._getTimeoutsForRequest(e.hostType),n(o,v);return C()}));function C(){return c("retrying request"),p._incrementHostIndex(e.hostType),n(o,v)}}(p._request,{url:e.url,method:e.method,body:t,jsonBody:e.body,timeouts:p._getTimeoutsForRequest(e.hostType),forceAuthHeaders:e.forceAuthHeaders});return p._useCache&&p._useRequestCache&&u&&(u[a]=b),v(b,(function(e){return e.body}))},s.prototype._getSearchParams=function(e,t){if(null==e)return t;for(var n in e)null!==n&&void 0!==e[n]&&e.hasOwnProperty(n)&&(t+=""===t?"":"&",t+=n+"="+encodeURIComponent("[object Array]"===Object.prototype.toString.call(e[n])?l(e[n]):e[n]));return t},s.prototype._computeRequestHeaders=function(e){var t=n(18),r={"x-algolia-agent":e.additionalUA?this._ua+"; "+e.additionalUA:this._ua,"x-algolia-application-id":this.applicationID};return!1!==e.withApiKey&&(r["x-algolia-api-key"]=this.apiKey),this.userToken&&(r["x-algolia-usertoken"]=this.userToken),this.securityTags&&(r["x-algolia-tagfilters"]=this.securityTags),t(this.extraHeaders,(function(e,t){r[t]=e})),e.headers&&t(e.headers,(function(e,t){r[t]=e})),r},s.prototype.search=function(e,t,r){var o=n(1),a=n(19);if(!o(e))throw new Error("Usage: client.search(arrayOfQueries[, callback])");"function"==typeof t?(r=t,t={}):void 0===t&&(t={});var i=this,c={requests:a(e,(function(e){var t="";return void 0!==e.query&&(t+="query="+encodeURIComponent(e.query)),{indexName:e.indexName,params:i._getSearchParams(e.params,t)}}))},s=a(c.requests,(function(e,t){return t+"="+encodeURIComponent("/1/indexes/"+encodeURIComponent(e.indexName)+"?"+e.params)})).join("&");return void 0!==t.strategy&&(c.strategy=t.strategy),this._jsonRequest({cache:this.cache,method:"POST",url:"/1/indexes/*/queries",body:c,hostType:"read",fallback:{method:"GET",url:"/1/indexes/*",body:{params:s}},callback:r})},s.prototype.searchForFacetValues=function(e){var t=n(1),r=n(19),o="Usage: client.searchForFacetValues([{indexName, params: {facetName, facetQuery, ...params}}, ...queries])";if(!t(e))throw new Error(o);var a=this;return a._promise.all(r(e,(function(e){if(!e||void 0===e.indexName||void 0===e.params.facetName||void 0===e.params.facetQuery)throw new Error(o);var t=n(9),r=n(108),i=e.indexName,c=e.params,s=c.facetName,u=r(t(c),(function(e){return"facetName"===e})),l=a._getSearchParams(u,"");return a._jsonRequest({cache:a.cache,method:"POST",url:"/1/indexes/"+encodeURIComponent(i)+"/facets/"+encodeURIComponent(s)+"/query",hostType:"read",body:{params:l}})})))},s.prototype.setSecurityTags=function(e){if("[object Array]"===Object.prototype.toString.call(e)){for(var t=[],n=0;n<e.length;++n)if("[object Array]"===Object.prototype.toString.call(e[n])){for(var r=[],o=0;o<e[n].length;++o)r.push(e[n][o]);t.push("("+r.join(",")+")")}else t.push(e[n]);e=t.join(",")}this.securityTags=e},s.prototype.setUserToken=function(e){this.userToken=e},s.prototype.clearCache=function(){this.cache={}},s.prototype.setRequestTimeout=function(e){e&&(this._timeouts.connect=this._timeouts.read=this._timeouts.write=e)},s.prototype.setTimeouts=function(e){this._timeouts=e},s.prototype.getTimeouts=function(){return this._timeouts},s.prototype._getAppIdData=function(){var e=i.get(this.applicationID);return null!==e&&this._cacheAppIdData(e),e},s.prototype._setAppIdData=function(e){return e.lastChange=(new Date).getTime(),this._cacheAppIdData(e),i.set(this.applicationID,e)},s.prototype._checkAppIdData=function(){var e=this._getAppIdData(),t=(new Date).getTime();return null===e||t-e.lastChange>c?this._resetInitialAppIdData(e):e},s.prototype._resetInitialAppIdData=function(e){var t=e||{};return t.hostIndexes={read:0,write:0},t.timeoutMultiplier=1,t.shuffleResult=t.shuffleResult||function(e){var t,n,r=e.length;for(;0!==r;)n=Math.floor(Math.random()*r),t=e[r-=1],e[r]=e[n],e[n]=t;return e}([1,2,3]),this._setAppIdData(t)},s.prototype._cacheAppIdData=function(e){this._hostIndexes=e.hostIndexes,this._timeoutMultiplier=e.timeoutMultiplier,this._shuffleResult=e.shuffleResult},s.prototype._partialAppIdDataUpdate=function(e){var t=n(18),r=this._getAppIdData();return t(e,(function(e,t){r[t]=e})),this._setAppIdData(r)},s.prototype._getHostByType=function(e){return this.hosts[e][this._getHostIndexByType(e)]},s.prototype._getTimeoutMultiplier=function(){return this._timeoutMultiplier},s.prototype._getHostIndexByType=function(e){return this._hostIndexes[e]},s.prototype._setHostIndexByType=function(e,t){var r=n(9)(this._hostIndexes);return r[t]=e,this._partialAppIdDataUpdate({hostIndexes:r}),e},s.prototype._incrementHostIndex=function(e){return this._setHostIndexByType((this._getHostIndexByType(e)+1)%this.hosts[e].length,e)},s.prototype._incrementTimeoutMultipler=function(){var e=Math.max(this._timeoutMultiplier+1,4);return this._partialAppIdDataUpdate({timeoutMultiplier:e})},s.prototype._getTimeoutsForRequest=function(e){return{connect:this._timeouts.connect*this._timeoutMultiplier,complete:this._timeouts[e]*this._timeoutMultiplier}}}).call(this,n(25))},function(e,t,n){(function(t){var r,o=n(31)("algoliasearch:src/hostIndexState.js"),a="algoliasearch-client-js",i={state:{},set:function(e,t){return this.state[e]=t,this.state[e]},get:function(e){return this.state[e]||null}},c={set:function(e,n){i.set(e,n);try{var r=JSON.parse(t.localStorage[a]);return r[e]=n,t.localStorage[a]=JSON.stringify(r),r[e]}catch(t){return s(e,t)}},get:function(e){try{return JSON.parse(t.localStorage[a])[e]||null}catch(t){return s(e,t)}}};function s(e,n){return o("localStorage failed with",n),function(){try{t.localStorage.removeItem(a)}catch(e){}}(),(r=i).get(e)}function u(e,t){return 1===arguments.length?r.get(e):r.set(e,t)}function l(){try{return"localStorage"in t&&null!==t.localStorage&&(t.localStorage[a]||t.localStorage.setItem(a,JSON.stringify({})),!0)}catch(e){return!1}}r=l()?c:i,e.exports={get:u,set:u,supportsLocalStorage:l}}).call(this,n(3))},function(e,t,n){var r;function o(e){function n(){if(n.enabled){var e=n,o=+new Date,a=o-(r||o);e.diff=a,e.prev=r,e.curr=o,r=o;for(var i=new Array(arguments.length),c=0;c<i.length;c++)i[c]=arguments[c];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var s=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;s++;var o=t.formatters[r];if("function"==typeof o){var a=i[s];n=o.call(e,a),i.splice(s,1),s--}return n})),t.formatArgs.call(e,i),(n.log||t.log||console.log.bind(console)).apply(e,i)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=o.debug=o.default=o).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&("-"===(e=n[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(197),t.names=[],t.skips=[],t.formatters={}},function(e,t){var n=1e3,r=60*n,o=60*r,a=24*o,i=365.25*a;function c(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var s,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*i;case"days":case"day":case"d":return c*a;case"hours":case"hour":case"hrs":case"hr":case"h":return c*o;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===u&&!1===isNaN(e))return t.long?c(s=e,a,"day")||c(s,o,"hour")||c(s,r,"minute")||c(s,n,"second")||s+" ms":function(e){if(e>=a)return Math.round(e/a)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){e.exports=function(e,t,n){var o={};return(n=n||{}).hosts=n.hosts||["analytics.algolia.com","analytics.algolia.com","analytics.algolia.com","analytics.algolia.com"],n.protocol=n.protocol||"https:",o.as=r(e,t,n),o.getABTests=function(e,t){var n=n||{},r=n.offset||0,o=n.limit||10;return this.as._jsonRequest({method:"GET",url:"/2/abtests?offset="+encodeURIComponent(r)+"&limit="+encodeURIComponent(o),hostType:"read",forceAuthHeaders:!0,callback:t})},o.getABTest=function(e,t){return this.as._jsonRequest({method:"GET",url:"/2/abtests/"+encodeURIComponent(e),hostType:"read",forceAuthHeaders:!0,callback:t})},o.addABTest=function(e,t){return this.as._jsonRequest({method:"POST",url:"/2/abtests",body:e,hostType:"read",forceAuthHeaders:!0,callback:t})},o.stopABTest=function(e,t){return this.as._jsonRequest({method:"POST",url:"/2/abtests/"+encodeURIComponent(e)+"/stop",hostType:"read",forceAuthHeaders:!0,callback:t})},o.deleteABTest=function(e,t){return this.as._jsonRequest({method:"DELETE",url:"/2/abtests/"+encodeURIComponent(e),hostType:"write",forceAuthHeaders:!0,callback:t})},o.waitTask=function(e,t,n){return this.as.initIndex(e).waitTask(t,n)},o};var r=n(104)},function(e,t,n){"use strict";var r=n(200),o=r.Promise||n(201).Promise;e.exports=function(e,t){var a=n(24),i=n(17),c=n(202),s=n(203),u=n(204);function l(e,t,r){return(r=n(9)(r||{}))._ua=r._ua||l.ua,new p(e,t,r)}t=t||"",l.version=n(206),l.ua="Algolia for JavaScript ("+l.version+"); "+t,l.initPlaces=u(l),r.__algolia={debug:n(31),algoliasearch:l};var d={hasXMLHttpRequest:"XMLHttpRequest"in r,hasXDomainRequest:"XDomainRequest"in r};function p(){e.apply(this,arguments)}return d.hasXMLHttpRequest&&(d.cors="withCredentials"in new XMLHttpRequest),a(p,e),p.prototype._request=function(e,t){return new o((function(n,r){if(d.cors||d.hasXDomainRequest){e=c(e,t.headers);var o,a,s=t.body,u=d.cors?new XMLHttpRequest:new XDomainRequest,l=!1;o=setTimeout(p,t.timeouts.connect),u.onprogress=function(){l||f()},"onreadystatechange"in u&&(u.onreadystatechange=function(){!l&&u.readyState>1&&f()}),u.onload=function(){if(a)return;var e;clearTimeout(o);try{e={body:JSON.parse(u.responseText),responseText:u.responseText,statusCode:u.status,headers:u.getAllResponseHeaders&&u.getAllResponseHeaders()||{}}}catch(t){e=new i.UnparsableJSON({more:u.responseText})}e instanceof i.UnparsableJSON?r(e):n(e)},u.onerror=function(e){if(a)return;clearTimeout(o),r(new i.Network({more:e}))},u instanceof XMLHttpRequest?(u.open(t.method,e,!0),t.forceAuthHeaders&&(u.setRequestHeader("x-algolia-application-id",t.headers["x-algolia-application-id"]),u.setRequestHeader("x-algolia-api-key",t.headers["x-algolia-api-key"]))):u.open(t.method,e),d.cors&&(s&&("POST"===t.method?u.setRequestHeader("content-type","application/x-www-form-urlencoded"):u.setRequestHeader("content-type","application/json")),u.setRequestHeader("accept","application/json")),s?u.send(s):u.send()}else r(new i.Network("CORS not supported"));function p(){a=!0,u.abort(),r(new i.RequestTimeout)}function f(){l=!0,clearTimeout(o),o=setTimeout(p,t.timeouts.complete)}}))},p.prototype._request.fallback=function(e,t){return e=c(e,t.headers),new o((function(n,r){s(e,t,(function(e,t){e?r(e):n(t)}))}))},p.prototype._promise={reject:function(e){return o.reject(e)},resolve:function(e){return o.resolve(e)},delay:function(e){return new o((function(t){setTimeout(t,e)}))},all:function(e){return o.all(e)}},l}},function(e,t,n){(function(t){var n;n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=n}).call(this,n(3))},function(e,t,n){(function(t,n){var r;r=function(){"use strict";function e(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,a=void 0,i=void 0,c=function(e,t){m[o]=e,m[o+1]=t,2===(o+=2)&&(i?i(h):b())},s="undefined"!=typeof window?window:void 0,u=s||{},l=u.MutationObserver||u.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var e=setTimeout;return function(){return e(h,1)}}var m=new Array(1e3);function h(){for(var e=0;e<o;e+=2)(0,m[e])(m[e+1]),m[e]=void 0,m[e+1]=void 0;o=0}var y,g,v,w,b=void 0;function T(e,t){var n=this,r=new this.constructor(C);void 0===r[_]&&L(r);var o=n._state;if(o){var a=arguments[o-1];c((function(){return O(o,r,a,n._result)}))}else U(n,r,e,t);return r}function S(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(C);return E(t,e),t}d?b=function(){return t.nextTick(h)}:l?(g=0,v=new l(h),w=document.createTextNode(""),v.observe(w,{characterData:!0}),b=function(){w.data=g=++g%2}):p?((y=new MessageChannel).port1.onmessage=h,b=function(){return y.port2.postMessage(0)}):b=void 0===s?function(){try{var e=Function("return this")().require("vertx");return void 0!==(a=e.runOnLoop||e.runOnContext)?function(){a(h)}:f()}catch(e){return f()}}():f();var _=Math.random().toString(36).substring(2);function C(){}var j=void 0,x=1,k=2,P={error:null};function A(e){try{return e.then}catch(e){return P.error=e,P}}function I(t,n,r){n.constructor===t.constructor&&r===T&&n.constructor.resolve===S?function(e,t){t._state===x?$(e,t._result):t._state===k?R(e,t._result):U(t,void 0,(function(t){return E(e,t)}),(function(t){return R(e,t)}))}(t,n):r===P?(R(t,P.error),P.error=null):void 0===r?$(t,n):e(r)?function(e,t,n){c((function(e){var r=!1,o=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,(function(n){r||(r=!0,t!==n?E(e,n):$(e,n))}),(function(t){r||(r=!0,R(e,t))}),e._label);!r&&o&&(r=!0,R(e,o))}),e)}(t,n,r):$(t,n)}function E(e,t){var n,r;e===t?R(e,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=t),null===n||"object"!==r&&"function"!==r?$(e,t):I(e,t,A(t)))}function M(e){e._onerror&&e._onerror(e._result),N(e)}function $(e,t){e._state===j&&(e._result=t,e._state=x,0!==e._subscribers.length&&c(N,e))}function R(e,t){e._state===j&&(e._state=k,e._result=t,c(M,e))}function U(e,t,n,r){var o=e._subscribers,a=o.length;e._onerror=null,o[a]=t,o[a+x]=n,o[a+k]=r,0===a&&e._state&&c(N,e)}function N(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,a=e._result,i=0;i<t.length;i+=3)r=t[i],o=t[i+n],r?O(n,r,o,a):o(a);e._subscribers.length=0}}function O(t,n,r,o){var a=e(r),i=void 0,c=void 0,s=void 0,u=void 0;if(a){if((i=function(e,t){try{return e(t)}catch(e){return P.error=e,P}}(r,o))===P?(u=!0,c=i.error,i.error=null):s=!0,n===i)return void R(n,new TypeError("A promises callback cannot return that same promise."))}else i=o,s=!0;n._state!==j||(a&&s?E(n,i):u?R(n,c):t===x?$(n,i):t===k&&R(n,i))}var D=0;function L(e){e[_]=D++,e._state=void 0,e._result=void 0,e._subscribers=[]}var q=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(C),this.promise[_]||L(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?$(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&$(this.promise,this._result))):R(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===j&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===S){var o=A(e);if(o===T&&e._state!==j)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===F){var a=new n(C);I(a,e,o),this._willSettleAt(a,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===j&&(this._remaining--,e===k?R(r,n):this._result[t]=n),0===this._remaining&&$(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;U(e,void 0,(function(e){return n._settledAt(x,t,e)}),(function(e){return n._settledAt(k,t,e)}))},e}(),F=function(){function e(t){this[_]=D++,this._result=this._state=void 0,this._subscribers=[],C!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t((function(t){E(e,t)}),(function(t){R(e,t)}))}catch(t){R(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},e}();return F.prototype.then=T,F.all=function(e){return new q(this,e).promise},F.race=function(e){var t=this;return r(e)?new t((function(n,r){for(var o=e.length,a=0;a<o;a++)t.resolve(e[a]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},F.resolve=S,F.reject=function(e){var t=new this(C);return R(t,e),t},F._setScheduler=function(e){i=e},F._setAsap=function(e){c=e},F._asap=c,F.polyfill=function(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=F},F.Promise=F,F},e.exports=r()}).call(this,n(25),n(3))},function(e,t,n){"use strict";e.exports=function(e,t){/\?/.test(e)?e+="&":e+="?";return e+r(t)};var r=n(110)},function(e,t,n){"use strict";e.exports=function(e,t,n){if("GET"!==t.method)return void n(new Error("Method "+t.method+" "+e+" is not supported by JSONP."));t.debug("JSONP: start");var a=!1,i=!1;o+=1;var c=document.getElementsByTagName("head")[0],s=document.createElement("script"),u="algoliaJSONP_"+o,l=!1;window[u]=function(e){!function(){try{delete window[u],delete window[u+"_loaded"]}catch(e){window[u]=window[u+"_loaded"]=void 0}}(),i?t.debug("JSONP: Late answer, ignoring"):(a=!0,f(),n(null,{body:e,responseText:JSON.stringify(e)}))},e+="&callback="+u,t.jsonBody&&t.jsonBody.params&&(e+="&"+t.jsonBody.params);var d=setTimeout((function(){t.debug("JSONP: Script timeout"),i=!0,f(),n(new r.RequestTimeout)}),t.timeouts.complete);function p(){t.debug("JSONP: success"),l||i||(l=!0,a||(t.debug("JSONP: Fail. Script loaded but did not call the callback"),f(),n(new r.JSONPScriptFail)))}function f(){clearTimeout(d),s.onload=null,s.onreadystatechange=null,s.onerror=null,c.removeChild(s)}s.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||p()},s.onload=p,s.onerror=function(){t.debug("JSONP: Script error"),l||i||(f(),n(new r.JSONPScriptError))},s.async=!0,s.defer=!0,s.src=e,c.appendChild(s)};var r=n(17),o=0},function(e,t,n){e.exports=function(e){return function(t,a,i){var c=n(9);(i=i&&c(i)||{}).hosts=i.hosts||["places-dsn.algolia.net","places-1.algolianet.com","places-2.algolianet.com","places-3.algolianet.com"],0!==arguments.length&&"object"!=typeof t&&void 0!==t||(t="",a="",i._allowEmptyCredentials=!0);var s=e(t,a,i),u=s.initIndex("places");return u.search=o("query","/1/places/query"),u.reverse=function(e,t){var n=r.encode(e);return this.as._jsonRequest({method:"GET",url:"/1/places/reverse?"+n,hostType:"read",callback:t})},u.getObject=function(e,t){return this.as._jsonRequest({method:"GET",url:"/1/places/"+encodeURIComponent(e),hostType:"read",callback:t})},u}};var r=n(111),o=n(106)},,function(e,t,n){"use strict";e.exports="3.35.1"},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){var t=function(e,t,n,r){var o=this;o.roles=[],o.departments=[],o.countries=[],o.universities=[];var a=[];o.addUniversityToSelection=function(e){return{name:e,isUserSuggested:!0}},o.handleFreeformInputChange=function(e,t){if(null!=e.search&&""!==e.search){var n=e.search;if(null!=(null!=e.tagging?e.tagging.fct:void 0)&&(n=e.tagging.fct(e.search)),null!=t){var r=_.find(e.items,(function(n){return n[t]===e.search}));null!=r&&(n=r)}return e.searchInput.scope().$broadcast("uis:select",n)}},r.getCountries().then((function(e){return o.countries=e})),r.getDefaultRoleHints().then((function(e){return o.roles=e})),r.getDefaultDepartmentHints().then((function(e){return a=e})),e.$watch("$ctrl.affiliationData.country",(function(e,t){if(null!=e&&e!==t)return o.affiliationData.university=null,o.affiliationData.role=null,o.affiliationData.department=null,r.getUniversitiesFromCountry(e).then((function(e){return o.universities=e}))})),e.$watch("$ctrl.affiliationData.university",(function(e,t){return null!=e&&e!==t&&(null!=e.departments?e.departments.length:void 0)>0?o.departments=_.uniq(e.departments):o.departments=a}))};return t.$inject=["$scope","$element","$attrs","UserAffiliationsDataService"],e.component("affiliationForm",{bindings:{affiliationData:"=",showUniversityAndCountry:"<",showRoleAndDepartment:"<"},controller:t,templateUrl:"affiliationFormTpl"})}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.controller("UserAffiliationsController",["$scope","UserAffiliationsDataService","$q","$window","_",function(e,t,n,r,o){e.userEmails=[],e.linkedInstitutionIds=[],e.hideInstitutionNotifications={},e.closeInstitutionNotification=function(t){e.hideInstitutionNotifications[t]=!0},e.samlBetaSession=ExposedSettings.hasSamlBeta,e.samlInitPath=ExposedSettings.samlInitPath;var a=/([^@]+)@(.+)/,i=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\ ".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA -Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,c=function(e){var t=e?e.match(a):void 0;return t?{local:t[1],domain:t[2]}:{local:null,domain:null}},s=function(t){if(!ExposedSettings.hasSamlFeature)return!1;if(!t)return!1;var n=t.university||t.institution;return!!n&&(!(!n||!n.ssoEnabled)||!!(e.samlBetaSession&&n&&n.ssoBeta))};e.getEmailSuggestion=function(r){var o=c(r);return e.ui.isValidEmail=i.test(r),e.ui.isBlacklistedEmail=!1,e.ui.showManualUniversitySelectionUI=!1,o.domain?(e.ui.isBlacklistedEmail=t.isDomainBlacklisted(o.domain),t.getUniversityDomainFromPartialDomainInput(o.domain).then((function(t){return c(e.newAffiliation.email).domain===t.hostname?(e.newAffiliation.university=t.university,e.newAffiliation.department=t.department,e.newAffiliation.ssoAvailable=s(t)):p(),n.resolve("".concat(o.local,"@").concat(t.hostname))})).catch((function(){return p(),n.reject(null)}))):(p(),n.reject(null))},e.linkInstitutionAcct=function(t,n){f(),e.ui.isMakingRequest=!0,e.ui.isProcessing=!0,r.location.href="".concat(e.samlInitPath,"?university_id=").concat(n,"&auto=/user/settings&email=").concat(t)},e.selectUniversityManually=function(){p(),e.ui.showManualUniversitySelectionUI=!0},e.changeAffiliation=function(n){o.get(n,["affiliation","institution","id"])&&t.getUniversityDetails(n.affiliation.institution.id).then((function(t){return e.affiliationToChange.university=t})),e.affiliationToChange.email=n.email,e.affiliationToChange.role=n.affiliation.role,e.affiliationToChange.department=n.affiliation.department},e.saveAffiliationChange=function(n){return n.affiliation.role=e.affiliationToChange.role,n.affiliation.department=e.affiliationToChange.department,u(),h(t.addRoleAndDepartment(n.email,n.affiliation.role,n.affiliation.department)).then((function(){return setTimeout((function(){return y()}))}))},e.cancelAffiliationChange=function(e){return u()},e.isChangingAffiliation=function(t){return e.affiliationToChange.email===t},e.showAddEmailForm=function(){return e.ui.showAddEmailUI=!0},e.addNewEmail=function(){var n;return n=e.newAffiliation.university?e.newAffiliation.university.isUserSuggested?t.addUserAffiliationWithUnknownUniversity(e.newAffiliation.email,e.newAffiliation.university.name,e.newAffiliation.country.code,e.newAffiliation.role,e.newAffiliation.department):t.addUserAffiliation(e.newAffiliation.email,e.newAffiliation.university.id,e.newAffiliation.role,e.newAffiliation.department):t.addUserEmail(e.newAffiliation.email),e.ui.isAddingNewEmail=!0,e.ui.showAddEmailUI=!1,h(n).then((function(){l(),d(),setTimeout((function(){return y()}))})).finally((function(){return e.ui.isAddingNewEmail=!1}))},e.setDefaultUserEmail=function(n){return h(t.setDefaultUserEmail(n.email)).then((function(){var t=!0,r=!1,o=void 0;try{for(var a,i=(e.userEmails||[])[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){a.value.default=!1}}catch(e){r=!0,o=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw o}}n.default=!0}))},e.removeUserEmail=function(n){return e.userEmails=e.userEmails.filter((function(e){return e!==n})),h(t.removeUserEmail(n.email))},e.resendConfirmationEmail=function(n){return f(),e.ui.isResendingConfirmation=!0,h(t.resendConfirmationEmail(n.email)).finally((function(){return e.ui.isResendingConfirmation=!1}))},e.acknowledgeError=function(){return m(),y()};var u=function(){return e.affiliationToChange={email:"",university:null,role:null,department:null}},l=function(){return e.newAffiliation={email:"",country:null,university:null,role:null,department:null}},d=function(){e.ui.showAddEmailUI=!1,e.ui.isValidEmail=!1,e.ui.isBlacklistedEmail=!1,e.ui.showManualUniversitySelectionUI=!1},p=function(){e.newAffiliation={email:e.newAffiliation.email}},f=function(){e.ui.isLoadingEmails=!1,e.ui.isProcessing=!1,e.ui.isResendingConfirmation=!1},m=function(){return e.ui={hasError:!1,errorMessage:"",showChangeAffiliationUI:!1,isMakingRequest:!1,isLoadingEmails:!1,isAddingNewEmail:!1},u(),l(),d()};m();var h=function(t){return e.ui.hasError=!1,e.ui.isMakingRequest=!0,t.catch((function(t){e.ui.hasError=!0,e.ui.errorMessage=o.get(t,["data","message"])})).finally((function(){return e.ui.isMakingRequest=!1})),t};e.institutionAlreadyLinked=function(t){var n=t.affiliation&&t.affiliation.institution&&t.affiliation.institution&&t.affiliation.institution.id?t.affiliation.institution.id.toString():void 0;return-1!==e.linkedInstitutionIds.indexOf(n)};var y=function(){f(),e.ui.isLoadingEmails=!0,h(t.getUserEmails()).then((function(t){e.userEmails=t.map((function(e){return e.ssoAvailable=s(e.affiliation),e})),e.linkedInstitutionIds=t.filter((function(e){if(e.samlProviderId)return e.samlProviderId})).map((function(e){return e.samlProviderId}))})).finally((function(){return e.ui.isLoadingEmails=!1}))};y()}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){for(var t=[{code:"af",name:"Afghanistan"},{code:"ax",name:"Åland Islands"},{code:"al",name:"Albania"},{code:"dz",name:"Algeria"},{code:"as",name:"American Samoa"},{code:"ad",name:"Andorra"},{code:"ao",name:"Angola"},{code:"ai",name:"Anguilla"},{code:"aq",name:"Antarctica"},{code:"ag",name:"Antigua and Barbuda"},{code:"ar",name:"Argentina"},{code:"am",name:"Armenia"},{code:"aw",name:"Aruba"},{code:"au",name:"Australia"},{code:"at",name:"Austria"},{code:"az",name:"Azerbaijan"},{code:"bs",name:"Bahamas"},{code:"bh",name:"Bahrain"},{code:"bd",name:"Bangladesh"},{code:"bb",name:"Barbados"},{code:"by",name:"Belarus"},{code:"be",name:"Belgium"},{code:"bz",name:"Belize"},{code:"bj",name:"Benin"},{code:"bm",name:"Bermuda"},{code:"bt",name:"Bhutan"},{code:"bo",name:"Bolivia"},{code:"bq",name:"Bonaire, Saint Eustatius and Saba"},{code:"ba",name:"Bosnia and Herzegovina"},{code:"bw",name:"Botswana"},{code:"bv",name:"Bouvet Island"},{code:"br",name:"Brazil"},{code:"io",name:"British Indian Ocean Territory"},{code:"vg",name:"British Virgin Islands"},{code:"bn",name:"Brunei"},{code:"bg",name:"Bulgaria"},{code:"bf",name:"Burkina Faso"},{code:"bi",name:"Burundi"},{code:"kh",name:"Cambodia"},{code:"cm",name:"Cameroon"},{code:"ca",name:"Canada"},{code:"cv",name:"Cabo Verde"},{code:"ky",name:"Cayman Islands"},{code:"cf",name:"Central African Republic"},{code:"td",name:"Chad"},{code:"cl",name:"Chile"},{code:"cn",name:"China"},{code:"cx",name:"Christmas Island"},{code:"cc",name:"Cocos (Keeling) Islands"},{code:"co",name:"Colombia"},{code:"km",name:"Comoros"},{code:"cg",name:"Congo"},{code:"ck",name:"Cook Islands"},{code:"cr",name:"Costa Rica"},{code:"ci",name:"Côte d'Ivoire"},{code:"hr",name:"Croatia"},{code:"cu",name:"Cuba"},{code:"cw",name:"Curaçao"},{code:"cy",name:"Cyprus"},{code:"cz",name:"Czech Republic"},{code:"kp",name:"Democratic People's Republic of Korea"},{code:"cd",name:"Democratic Republic of the Congo"},{code:"dk",name:"Denmark"},{code:"dj",name:"Djibouti"},{code:"dm",name:"Dominica"},{code:"do",name:"Dominican Republic"},{code:"ec",name:"Ecuador"},{code:"eg",name:"Egypt"},{code:"sv",name:"El Salvador"},{code:"gq",name:"Equatorial Guinea"},{code:"er",name:"Eritrea"},{code:"ee",name:"Estonia"},{code:"et",name:"Ethiopia"},{code:"fk",name:"Falkland Islands (Malvinas)"},{code:"fo",name:"Faroe Islands"},{code:"fj",name:"Fiji"},{code:"fi",name:"Finland"},{code:"fr",name:"France"},{code:"gf",name:"French Guiana"},{code:"pf",name:"French Polynesia"},{code:"tf",name:"French Southern Territories"},{code:"ga",name:"Gabon"},{code:"gm",name:"Gambia"},{code:"ge",name:"Georgia"},{code:"de",name:"Germany"},{code:"gh",name:"Ghana"},{code:"gi",name:"Gibraltar"},{code:"gr",name:"Greece"},{code:"gl",name:"Greenland"},{code:"gd",name:"Grenada"},{code:"gp",name:"Guadeloupe"},{code:"gu",name:"Guam"},{code:"gt",name:"Guatemala"},{code:"gg",name:"Guernsey"},{code:"gn",name:"Guinea"},{code:"gw",name:"Guinea-Bissau"},{code:"gy",name:"Guyana"},{code:"ht",name:"Haiti"},{code:"hm",name:"Heard Island and McDonald Islands"},{code:"va",name:"Holy See (Vatican City)"},{code:"hn",name:"Honduras"},{code:"hk",name:"Hong Kong"},{code:"hu",name:"Hungary"},{code:"is",name:"Iceland"},{code:"in",name:"India"},{code:"id",name:"Indonesia"},{code:"ir",name:"Iran"},{code:"iq",name:"Iraq"},{code:"ie",name:"Ireland"},{code:"im",name:"Isle of Man"},{code:"il",name:"Israel"},{code:"it",name:"Italy"},{code:"jm",name:"Jamaica"},{code:"jp",name:"Japan"},{code:"je",name:"Jersey"},{code:"jo",name:"Jordan"},{code:"kz",name:"Kazakhstan"},{code:"ke",name:"Kenya"},{code:"ki",name:"Kiribati"},{code:"xk",name:"Kosovo"},{code:"kw",name:"Kuwait"},{code:"kg",name:"Kyrgyzstan"},{code:"la",name:"Laos"},{code:"lv",name:"Latvia"},{code:"lb",name:"Lebanon"},{code:"ls",name:"Lesotho"},{code:"lr",name:"Liberia"},{code:"ly",name:"Libya"},{code:"li",name:"Liechtenstein"},{code:"lt",name:"Lithuania"},{code:"lu",name:"Luxembourg"},{code:"mo",name:"Macao"},{code:"mk",name:"Macedonia"},{code:"mg",name:"Madagascar"},{code:"mw",name:"Malawi"},{code:"my",name:"Malaysia"},{code:"mv",name:"Maldives"},{code:"ml",name:"Mali"},{code:"mt",name:"Malta"},{code:"mh",name:"Marshall Islands"},{code:"mq",name:"Martinique"},{code:"mr",name:"Mauritania"},{code:"mu",name:"Mauritius"},{code:"yt",name:"Mayotte"},{code:"mx",name:"Mexico"},{code:"fm",name:"Micronesia"},{code:"md",name:"Moldova"},{code:"mc",name:"Monaco"},{code:"mn",name:"Mongolia"},{code:"me",name:"Montenegro"},{code:"ms",name:"Montserrat"},{code:"ma",name:"Morocco"},{code:"mz",name:"Mozambique"},{code:"mm",name:"Myanmar"},{code:"na",name:"Namibia"},{code:"nr",name:"Nauru"},{code:"np",name:"Nepal"},{code:"nl",name:"Netherlands"},{code:"an",name:"Netherlands Antilles"},{code:"nc",name:"New Caledonia"},{code:"nz",name:"New Zealand"},{code:"ni",name:"Nicaragua"},{code:"ne",name:"Niger"},{code:"ng",name:"Nigeria"},{code:"nu",name:"Niue"},{code:"nf",name:"Norfolk Island"},{code:"mp",name:"Northern Mariana Islands"},{code:"no",name:"Norway"},{code:"om",name:"Oman"},{code:"pk",name:"Pakistan"},{code:"pw",name:"Palau"},{code:"ps",name:"Palestine"},{code:"pa",name:"Panama"},{code:"pg",name:"Papua New Guinea"},{code:"py",name:"Paraguay"},{code:"pe",name:"Peru"},{code:"ph",name:"Philippines"},{code:"pn",name:"Pitcairn"},{code:"pl",name:"Poland"},{code:"pt",name:"Portugal"},{code:"pr",name:"Puerto Rico"},{code:"qa",name:"Qatar"},{code:"kr",name:"Republic of Korea"},{code:"re",name:"Réunion"},{code:"ro",name:"Romania"},{code:"ru",name:"Russia"},{code:"rw",name:"Rwanda"},{code:"bl",name:"Saint Barthélemy"},{code:"sh",name:"Saint Helena, Ascension and Tristan da Cunha"},{code:"kn",name:"Saint Kitts and Nevis"},{code:"lc",name:"Saint Lucia"},{code:"mf",name:"Saint Martin"},{code:"pm",name:"Saint Pierre and Miquelon"},{code:"vc",name:"Saint Vincent and the Grenadines"},{code:"ws",name:"Samoa"},{code:"sm",name:"San Marino"},{code:"st",name:"Sao Tome and Principe"},{code:"sa",name:"Saudi Arabia"},{code:"sn",name:"Senegal"},{code:"rs",name:"Serbia"},{code:"sc",name:"Seychelles"},{code:"sl",name:"Sierra Leone"},{code:"sg",name:"Singapore"},{code:"sx",name:"Sint Maarten"},{code:"sk",name:"Slovakia"},{code:"si",name:"Slovenia"},{code:"sb",name:"Solomon Islands"},{code:"so",name:"Somalia"},{code:"za",name:"South Africa"},{code:"gs",name:"South Georgia and the South Sandwich Islands"},{code:"ss",name:"South Sudan"},{code:"es",name:"Spain"},{code:"lk",name:"Sri Lanka"},{code:"sd",name:"Sudan"},{code:"sr",name:"Suriname"},{code:"sj",name:"Svalbard and Jan Mayen"},{code:"sz",name:"Swaziland"},{code:"se",name:"Sweden"},{code:"ch",name:"Switzerland"},{code:"sy",name:"Syria"},{code:"tw",name:"Taiwan"},{code:"tj",name:"Tajikistan"},{code:"tz",name:"Tanzania"},{code:"th",name:"Thailand"},{code:"tl",name:"Timor-Leste"},{code:"tg",name:"Togo"},{code:"tk",name:"Tokelau"},{code:"to",name:"Tonga"},{code:"tt",name:"Trinidad and Tobago"},{code:"tn",name:"Tunisia"},{code:"tr",name:"Turkey"},{code:"tm",name:"Turkmenistan"},{code:"tc",name:"Turks and Caicos Islands"},{code:"tv",name:"Tuvalu"},{code:"vi",name:"U.S. Virgin Islands"},{code:"ug",name:"Uganda"},{code:"ua",name:"Ukraine"},{code:"ae",name:"United Arab Emirates"},{code:"gb",name:"United Kingdom"},{code:"us",name:"United States of America"},{code:"um",name:"United States Minor Outlying Islands"},{code:"uy",name:"Uruguay"},{code:"uz",name:"Uzbekistan"},{code:"vu",name:"Vanuatu"},{code:"ve",name:"Venezuela"},{code:"vn",name:"Vietnam"},{code:"wf",name:"Wallis and Futuna"},{code:"eh",name:"Western Sahara"},{code:"ye",name:"Yemen"},{code:"zm",name:"Zambia"},{code:"zw",name:"Zimbabwe"}],n={},r={},o=["Undergraduate Student","Masters Student (MSc, MA, ...)","Doctoral Student (PhD, EngD, ...)","Postdoc","Lecturer","Senior Lecturer","Reader","Associate Professor ","Assistant Professor ","Professor","Emeritus Professor"],a=["Aeronautics & Astronautics","Anesthesia","Anthropology","Applied Physics","Art & Art History","Biochemistry","Bioengineering","Biology","Business School Library","Business, Graduate School of","Cardiothoracic Surgery","Chemical and Systems Biology","Chemical Engineering","Chemistry","Civil & Environmental Engineering","Classics","Communication","Comparative Literature","Comparative Medicine","Computer Science","Dermatology","Developmental Biology","Earth System Science","East Asian Languages and Cultures","Economics","Education, School of","Electrical Engineering","Energy Resources Engineering","English","French and Italian","Genetics","Geological Sciences","Geophysics","German Studies","Health Research & Policy","History","Iberian & Latin American Cultures","Law Library","Law School","Linguistics","Management Science & Engineering","Materials Science & Engineering","Mathematics","Mechanical Engineering","Medical Library","Medicine","Microbiology & Immunology","Molecular & Cellular Physiology","Music","Neurobiology","Neurology & Neurological Sciences","Neurosurgery","Obstetrics and Gynecology","Ophthalmology","Orthopaedic Surgery","Otolaryngology (Head and Neck Surgery)","Pathology","Pediatrics","Philosophy","Physics","Political Science","Psychiatry and Behavioral Sciences","Psychology","Radiation Oncology","Radiology","Religious Studies","Slavic Languages and Literature","Sociology","University Libraries","Statistics","Structural Biology","Surgery","Theater and Performance Studies","Urology"],i={"overleaf.com":!0},c=["br","cn","co","co.jp","co.uk","com","com.au","de","fr","in","info","io","net","no","ru","se","us","com.tw","com.br","pl","it","co.in","com.mx"],s=0,u=Array.from(["gmail","googlemail","icloud","me","yahoo","ymail","yahoomail","hotmail","live","msn","outlook","gmx","mail","aol","163","mac","qq","o2","libero","126"]);s<u.length;s++)for(var l=u[s],d=0,p=Array.from(c);d<p.length;d++){var f=p[d];i["".concat(l,".").concat(f)]=!0}return e.factory("UserAffiliationsDataService",["$http","$q","_",function(e,c,s){var u=function(){return e.get("/user/emails").then((function(e){return e.data}))},l=function(e){return e.toLowerCase()in i};return{getCountries:function(){return c.resolve(t)},getDefaultRoleHints:function(){return c.resolve(o)},getDefaultDepartmentHints:function(){return c.resolve(a)},getUserEmails:u,getUserDefaultEmail:function(){return u().then((function(e){return s.find(e,(function(e){return e.default}))}))},getUniversitiesFromCountry:function(t){var r;return r=null!=n[t.code]?n[t.code]:e.get("/institutions/list",{params:{country_code:t.code}}).then((function(e){return n[t.code]=e.data})),c.resolve(r)},getUniversityDomainFromPartialDomainInput:function(t){return null!=r[t]?c.resolve(r[t]):e.get("/institutions/domains",{params:{hostname:t,limit:1}}).then((function(e){var t=e.data[0];return null==t||l(t.hostname)?c.reject(null):(r[t.hostname]=t,c.resolve(t))}))},getUniversityDetails:function(t){return e.get("/institutions/list/".concat(t)).then((function(e){return e.data}))},addUserEmail:function(t){return e.post("/user/emails",{email:t,_csrf:window.csrfToken})},addUserAffiliationWithUnknownUniversity:function(t,n,r,o,a){return e.post("/user/emails",{email:t,university:{name:n,country_code:r},role:o,department:a,_csrf:window.csrfToken})},addUserAffiliation:function(t,n,r,o){return e.post("/user/emails",{email:t,university:{id:n},role:r,department:o,_csrf:window.csrfToken})},addRoleAndDepartment:function(t,n,r){return e.post("/user/emails/endorse",{email:t,role:n,department:r,_csrf:window.csrfToken})},setDefaultUserEmail:function(t){return e.post("/user/emails/default",{email:t,_csrf:window.csrfToken})},removeUserEmail:function(t){return e.post("/user/emails/delete",{email:t,_csrf:window.csrfToken})},resendConfirmationEmail:function(t){return e.post("/user/emails/resend_confirmation",{email:t,_csrf:window.csrfToken})},isDomainBlacklisted:l}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.controller("UserOauthController",["$http","$scope","$q",function(e,t,n){var r=function(e,n){t.providers[e].ui.hasError=!0,t.providers[e].ui.errorMessage=n&&n.data&&n.data.message?n.data.message:"error"};t.unlink=function(n){if(window.ExposedSettings.isOverleaf){t.providers[n].ui={hasError:!1,isProcessing:!0};var o={_csrf:window.csrfToken,link:!1,providerId:n};e.post("/user/oauth-unlink",o).catch((function(e){t.providers[n].ui.isProcessing=!1,r(n,e)})).then((function(e){t.providers[n].ui.isProcessing=!1,200===e.status?t.thirdPartyIds[n]=null:r(n,e)}))}},t.ui={hasError:!1,errorMessage:""},t.providers=window.oauthProviders,t.thirdPartyIds=window.thirdPartyIds}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.constant("Keys",{ENTER:13,TAB:9,ESCAPE:27,SPACE:32,BACKSPACE:8,UP:38,DOWN:40,LEFT:37,RIGHT:39,PERIOD:190,COMMA:188,END:35})}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){e.controller("ImportingController",["$interval","$scope","$timeout","$window",function(e,t,n,r){e((function(){t.state.load_progress+=5,t.state.load_progress>100&&(t.state.load_progress=20)}),500),n((function(){r.location.reload()}),5e3),t.state={load_progress:20}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){e.directive("autoSubmitForm",(function(){return{link:function(e,t){t.submit()}}}))}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0),n(29)],void 0===(o=function(e){e.directive("asyncForm",["$http","validateCaptcha","validateCaptchaV3",function(e,t,n){return{controller:["$scope",function(e){return this.getEmail=function(){return e.email},this}],link:function(r,o,a){var i,c=a.asyncForm;r[a.name].response=i={},r[a.name].inflight=!1;var s=function(e){for(var t={},n=0,s=Array.from(o.serializeArray());n<s.length;n++){var u=s[n];t[u.name]=u.value}return null!=e&&(t["g-recaptcha-response"]=e),r[a.name].inflight=!0,l(o.attr("method"))(o.attr("action"),t,{disableAutoLoginRedirect:!0}).then((function(e){var t=e.data,n=e.headers;r[a.name].inflight=!1,i.success=!0,i.error=!1;var o=r[a.onSuccess];if(o)o(e);else{if(null!=t.redir)return ga("send","event",c,"success"),window.location=t.redir;if(null!=t.message)return i.message=t.message,"error"===t.message.type?(i.success=!1,i.error=!0,ga("send","event",c,"failure",t.message)):ga("send","event",c,"success");if(r.$eval(a.asyncFormDownloadResponse)){var s=new Blob([t],{type:n("Content-Type")});location.href=URL.createObjectURL(s)}}})).catch((function(e){var t;u=e.data,t=e.status,e.headers,e.config,r[a.name].inflight=!1,i.success=!1,i.error=!0,i.status=t,i.data=u;var n=r[a.onError];if(!n)return 400===t&&u.accountLinkingError?i.message={text:u.accountLinkingError,type:"error"}:i.message=400===t?{text:"Invalid Request. Please correct the data and try again.",type:"error"}:403===t?{text:"Session error. Please check you have cookies enabled. If the problem persists, try clearing your cache and cookies.",type:"error"}:429===t?{text:"Too many attempts. Please wait for a while and try again.",type:"error"}:{text:(null!=u.message?u.message.text:void 0)||u.message||"Something went wrong talking to the server :(. Please try again.",type:"error"},ga("send","event",c,"failure",u.message);n(e)}))},u=function(){return null==(e=function(e){return s(e)})&&(e=function(e){}),a.captchaActionName&&n(a.captchaActionName),null!=a.captcha?t(e):e();var e},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"post",n={post:e.post,get:e.get};return n[t.toLowerCase()]};if(o.on("submit",(function(e){return e.preventDefault(),u()})),a.autoSubmit)return u()}}}]),e.directive("formMessages",(function(){return{restrict:"E",template:"<div class=\"alert\" ng-class=\"{\n  'alert-danger': form.response.message.type == 'error',\n  'alert-success': form.response.message.type != 'error'\n}\" ng-show=\"!!form.response.message\" ng-bind-html=\"form.response.message.text\">\n</div>\n<div ng-transclude></div>",transclude:!0,scope:{form:"=for"}}}))}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}r=[n(0),n(29)],void 0===(o=function(e){e.directive("complexPassword",(function(){return{require:["^asyncForm","ngModel"],link:function(e,t,n,r){PassField.Config.blackList=[];var o={pattern:"",length:{min:6,max:72},allowEmpty:!1,allowAnyChars:!1,isMasked:!0,showToggle:!1,showGenerate:!1,showTip:!1,showWarn:!1,checkMode:PassField.CheckModes.STRICT,chars:{digits:"1234567890",letters:"abcdefghijklmnopqrstuvwxyz",letters_up:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",symbols:"@#$%^&*()-_=+[]{};:<>/?!£€.,"}},i=_.defaults(window.passwordStrengthOptions||{},o);1===i.length.min&&(i.acceptRate=0),i.length.max>72&&(i.length.max=72),i.length.max>0&&(i.length.max+=1);var c=new PassField.Field("passwordField",i),s=a(Array.from(r),2),u=s[0],l=s[1];l.$parsers.unshift((function(t){var n=c.validatePass(),r=u.getEmail()||window.usersEmail;if(n){if("string"==typeof r&&""!==r){var o=r.split("@")[0];-1===t.indexOf(r)&&-1===t.indexOf(o)||(n=!1,e.complexPasswordErrorMessage="Password can not contain email address")}}else e.complexPasswordErrorMessage=c.getPassValidationMessage();return null!=i.length.max&&t.length>=i.length.max&&(n=!1,e.complexPasswordErrorMessage="Maximum password length ".concat(i.length.max-1," exceeded")),null!=i.length.min&&t.length<i.length.min&&(n=!1,e.complexPasswordErrorMessage="Password too short, minimum ".concat(i.length.min)),l.$setValidity("complexPassword",n),t}))}}}))}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.directive("equals",(function(){return{require:"ngModel",link:function(e,t,n,r){var o="#".concat(n.equals);return t.add(o).on("keyup",(function(){return e.$apply((function(){var e=t.val()===$(o).val();return r.$setValidity("areEqual",e)}))}))}}}))}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.directive("eventTracking",["eventTracking",function(e){return{scope:{eventTracking:"@",eventSegmentation:"=?"},link:function(t,n,r){var o=r.eventTrackingGa||!1,a=r.eventTrackingMb||!1,i=r.eventTrackingSendOnce?"sendMBOnce":"sendMB",c=r.eventTrackingSendOnce?"sendGAOnce":"send",s=t.eventSegmentation||{};s.page=window.location.pathname;var u=function(n){if(a&&e[i](t.eventTracking,s),o&&e[c](r.eventTrackingGa,r.eventTrackingAction||t.eventTracking,r.eventTrackingLabel||""),n)return $(window).unbind("resize scroll")};if("load"===r.eventTrackingTrigger)return u();if("click"===r.eventTrackingTrigger)return n.on("click",(function(e){return u()}));if("hover"===r.eventTrackingTrigger){var l=null,d=500;return r.eventHoverAmt&&(d=parseInt(r.eventHoverAmt,10)),n.on("mouseenter",(function(){l=setTimeout((function(){return u()}),d)})).on("mouseleave",(function(){return clearTimeout(l)}))}"scroll"!==r.eventTrackingTrigger||e.eventInCache(t.eventTracking)||$(window).on("resize scroll",_.throttle((function(){(function(e){var t=e.offset().top,n=t+e.outerHeight(),r=$(window).scrollTop(),o=r+$(window).height();return n>r&&t<o})(n)&&u(!0)}),500))}}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.directive("selectAllList",(function(){return{controller:["$scope",function(e){this.selectAll=function(){return e.$broadcast("select-all:select")},this.deselectAll=function(){return e.$broadcast("select-all:deselect")},this.clearSelectAllState=function(){return e.$broadcast("select-all:clear")}}],link:function(e,t,n){}}})),e.directive("selectAll",(function(){return{require:"^selectAllList",link:function(e,t,n,r){return e.$on("select-all:clear",(function(){return t.prop("checked",!1)})),t.change((function(){return t.is(":checked")?r.selectAll():r.deselectAll(),!0}))}}})),e.directive("selectIndividual",(function(){return{require:"^selectAllList",scope:{ngModel:"="},link:function(e,t,n,r){var o=!1;return e.$watch("ngModel",(function(e){if(null!=e&&!o)return r.clearSelectAllState()})),e.$on("select-all:select",(function(){if(!t.prop("disabled"))return o=!0,e.$apply((function(){return e.ngModel=!0})),o=!1})),e.$on("select-all:deselect",(function(){if(!t.prop("disabled"))return o=!0,e.$apply((function(){return e.ngModel=!1})),o=!1})),e.$on("select-all:row-clicked",(function(){if(!t.prop("disabled"))return o=!0,e.$apply((function(){if(e.ngModel=!e.ngModel,!e.ngModel)return r.clearSelectAllState()})),o=!1}))}}})),e.directive("selectRow",(function(){return{scope:!0,link:function(e,t,n){return t.on("click",(function(t){return e.$broadcast("select-all:row-clicked")}))}}}))}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.directive("maxHeight",(function(){return{restrict:"A",link:function(e,t,n){return e.$watch(n.maxHeight,(function(e){if(null!=e)return t.css({"max-height":e})}))}}}))}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){e.directive("bookmarkableTabset",["$location","_",function(e,t){return{restrict:"A",require:"tabset",link:function(n,r,o,a){var i=function(e){if(e&&""!==e){var n=t.find(a.tabs,(function(t){return t.bookmarkableTabId===e}));if(n)return n.select(),r.children()[0].scrollIntoView({behavior:"smooth"})}};n.$applyAsync((function(){var t=e.hash();i(t);var n=document.querySelectorAll(".link-to-tab"),r=function(e){var t=e.currentTarget.getAttribute("href").split("#").pop();i(t)};n&&Array.from(n).map((function(e){return e.addEventListener("click",r)}))}))}}}]),e.directive("bookmarkableTab",["$location",function(e){return{restrict:"A",require:"tab",link:function(t,n,r,o){var a=n.isolateScope(),i=r.bookmarkableTab;a&&i&&""!==i&&(a.bookmarkableTabId=i,a.$watch("active",(function(t,n){if(t&&!n&&e.hash()!==i)return e.hash(i)})))}}}])}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){var t=function(e,t,n,r){var o=this;o.showHint=!1,o.hasFocus=!1,o.handleFocus=function(){return o.hasFocus=!0,o.suggestion=null},o.handleBlur=function(){return o.showHint=!1,o.hasFocus=!1,o.suggestion=null,o.onBlur()},o.handleKeyDown=function(e){return e.which!==r.TAB&&e.which!==r.ENTER||null==o.suggestion||""===o.suggestion||(e.preventDefault(),o.localNgModel+=o.suggestion),o.suggestion=null,o.showHint=!1},e.$watch("$ctrl.localNgModel",(function(e,t){if(o.hasFocus&&e!==t)return o.suggestion=null,o.showHint=!1,o.getSuggestion({userInput:e}).then((function(t){if(null!=t&&e===o.localNgModel)return o.showHint=!0,o.suggestion=t.replace(e,"")})).catch((function(){return o.suggestion=null}))}))};return t.$inject=["$scope","$element","$attrs","Keys"],e.component("inputSuggestions",{bindings:{localNgModel:"=ngModel",localNgModelOptions:"=?ngModelOptions",getSuggestion:"&",onBlur:"&?",inputId:"@?",inputName:"@?",inputPlaceholder:"@?",inputType:"@?",inputRequired:"=?"},controller:t,template:['<div class="input-suggestions">','<div class="form-control input-suggestions-shadow">','<span ng-bind="$ctrl.localNgModel"',' class="input-suggestions-shadow-existing"',' ng-show="$ctrl.showHint">',"</span>",'<span ng-bind="$ctrl.suggestion"',' class="input-suggestions-shadow-suggested"',' ng-show="$ctrl.showHint">',"</span>","</div>",'<input type="text"',' class="form-control input-suggestions-main"',' ng-focus="$ctrl.handleFocus()"',' ng-keyDown="$ctrl.handleKeyDown($event)"',' ng-blur="$ctrl.handleBlur()"',' ng-model="$ctrl.localNgModel"',' ng-model-options="$ctrl.localNgModelOptions"',' ng-model-options="{ debounce: 50 }"',' ng-attr-id="{{ ::$ctrl.inputId }}"',' ng-attr-placeholder="{{ ::$ctrl.inputPlaceholder }}"',' ng-attr-type="{{ ::$ctrl.inputType }}"',' ng-attr-name="{{ ::$ctrl.inputName }}"',' ng-required="::$ctrl.inputRequired">',"</div>"].join("")})}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(223)],void 0===(o=function(){}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(224)],void 0===(o=function(){}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n(0)],void 0===(o=function(e){return e.controller("LaunchpadController",["$scope","$http","$timeout",function(e,t,n){if(e.adminUserExists=window.data.adminUserExists,e.ideJsPath=window.data.ideJsPath,e.authMethod=window.data.authMethod,e.createAdminSuccess=null,e.createAdminError=null,e.statusChecks={ideJs:{status:"inflight",error:null},websocket:{status:"inflight",error:null},healthCheck:{status:"inflight",error:null}},e.testEmail={emailAddress:"",inflight:!1,status:null},e.shouldShowAdminForm=function(){return!e.adminUserExists},e.onCreateAdminSuccess=function(t){var n=t.status;if(n>=200&&n<300)return e.createAdminSuccess=!0},e.onCreateAdminError=function(){return e.createAdminError=!0},e.sendTestEmail=function(){return e.testEmail.inflight=!0,e.testEmail.status=null,t.post("/launchpad/send_test_email",{email:e.testEmail.emailAddress,_csrf:window.csrfToken}).then((function(t){var n=t.status;if(e.testEmail.inflight=!1,n>=200&&n<300)return e.testEmail.status="ok"})).catch((function(){return e.testEmail.inflight=!1,e.testEmail.status="error"}))},e.tryFetchIdeJs=function(){return e.statusChecks.ideJs.status="inflight",n((function(){return t.get(e.ideJsPath).then((function(t){var n=t.status;if(n>=200&&n<300)return e.statusChecks.ideJs.status="ok"})).catch((function(t){var n=t.status;return e.statusChecks.ideJs.status="error",e.statusChecks.ideJs.error=new Error("Http status: ".concat(n))}))}),1e3)},e.tryOpenWebSocket=function(){return e.statusChecks.websocket.status="inflight",n((function(){if("undefined"==typeof io||null===io)return e.statusChecks.websocket.status="error",void(e.statusChecks.websocket.error="socket.io not loaded");var t=io.connect(null,{reconnect:!1,"connect timeout":3e4,"force new connection":!0});return t.on("connectionAccepted",(function(){return e.statusChecks.websocket.status="ok",e.$apply((function(){}))})),t.on("connectionRejected",(function(t){return e.statusChecks.websocket.status="error",e.statusChecks.websocket.error=t,e.$apply((function(){}))})),t.on("connect_failed",(function(t){return e.statusChecks.websocket.status="error",e.statusChecks.websocket.error=t,e.$apply((function(){}))}))}),1e3)},e.tryHealthCheck=function(){return e.statusChecks.healthCheck.status="inflight",t.get("/health_check").then((function(t){var n=t.status;if(n>=200&&n<300)return e.statusChecks.healthCheck.status="ok"})).catch((function(t){var n=t.status;return e.statusChecks.healthCheck.status="error",e.statusChecks.healthCheck.error=new Error("Http status: ".concat(n))}))},e.runStatusChecks=function(){return n((function(){return e.tryFetchIdeJs()}),1e3),n((function(){return e.tryOpenWebSocket()}),2e3)},e.adminUserExists)return e.runStatusChecks()}])}.apply(t,r))||(e.exports=o)}])}));
//# sourceMappingURL=main-b9abd55fc32032a0cedf.js.map